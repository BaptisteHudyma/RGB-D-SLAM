\hypertarget{classrgbd__slam_1_1features_1_1keypoints_1_1_key___point___extraction}{}\doxysection{rgbd\+\_\+slam\+::features\+::keypoints\+::Key\+\_\+\+Point\+\_\+\+Extraction Class Reference}
\label{classrgbd__slam_1_1features_1_1keypoints_1_1_key___point___extraction}\index{rgbd\_slam::features::keypoints::Key\_Point\_Extraction@{rgbd\_slam::features::keypoints::Key\_Point\_Extraction}}


A class to detect and track keypoints. This class will detect keypoints in gray images, compute descriptors and track those points using optical flow and/or descriptor matching.  




{\ttfamily \#include $<$keypoint\+\_\+detection.\+hpp$>$}

\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classrgbd__slam_1_1features_1_1keypoints_1_1_key___point___extraction_adf8a35140fc380cc46b4c7a1f5e5abc8}{Key\+\_\+\+Point\+\_\+\+Extraction}} ()
\item 
const \mbox{\hyperlink{classrgbd__slam_1_1features_1_1keypoints_1_1_keypoint___handler}{Keypoint\+\_\+\+Handler}} \mbox{\hyperlink{classrgbd__slam_1_1features_1_1keypoints_1_1_key___point___extraction_aca210323ab089b71468435f136d96aad}{compute\+\_\+keypoints}} (const cv\+::\+Mat \&gray\+Image, const cv\+::\+Mat \&depth\+Image, const \mbox{\hyperlink{structrgbd__slam_1_1features_1_1keypoints_1_1_keypoints_with_id_struct}{Keypoints\+With\+Id\+Struct}} \&last\+Keypoints\+With\+Ids, const bool force\+Keypoint\+Detection=false)
\begin{DoxyCompactList}\small\item\em compute the keypoints in the gray image, using optical flow and/or generic feature detectors \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classrgbd__slam_1_1features_1_1keypoints_1_1_key___point___extraction_a7c1fbb870b6cde4b7ed30fc3195d669e}{show\+\_\+statistics}} (const double mean\+Frame\+Treatment\+Duration, const uint frame\+Count) const
\begin{DoxyCompactList}\small\item\em Show the time statistics for certain parts of the program. Kind of a basic profiler. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
const std\+::vector$<$ cv\+::\+Point2f $>$ \mbox{\hyperlink{classrgbd__slam_1_1features_1_1keypoints_1_1_key___point___extraction_a3dd4e2a25365bca3f79c605ac069503c}{detect\+\_\+keypoints}} (const cv\+::\+Mat \&gray\+Image, const cv\+::\+Mat \&mask, const uint minimum\+Points\+For\+Validity) const
\begin{DoxyCompactList}\small\item\em Compute new key point, with an optional mask to exclude detection zones. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classrgbd__slam_1_1features_1_1keypoints_1_1_key___point___extraction_a6e524bd7df260bcced969b179ae84e5e}{perform\+\_\+keypoint\+\_\+detection}} (const cv\+::\+Mat \&gray\+Image, const cv\+::\+Mat \&mask, const cv\+::\+Ptr$<$ cv\+::\+Feature\+Detector $>$ \&feature\+Detector, std\+::vector$<$ cv\+::\+Key\+Point $>$ \&frame\+Keypoints) const
\begin{DoxyCompactList}\small\item\em Perform keypoint detection on the image, divided in smaller patches. \end{DoxyCompactList}\item 
const cv\+::\+Mat \mbox{\hyperlink{classrgbd__slam_1_1features_1_1keypoints_1_1_key___point___extraction_a41ff5b3e5511b495d5bbb94d4048c5de}{compute\+\_\+key\+\_\+point\+\_\+mask}} (const cv\+::\+Size image\+Size, const std\+::vector$<$ cv\+::\+Point2f $>$ \&keypoint\+Container) const
\end{DoxyCompactItemize}
\doxysubsection*{Static Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
static void \mbox{\hyperlink{classrgbd__slam_1_1features_1_1keypoints_1_1_key___point___extraction_ac39cdfc1afc1fafa4aecc02754593450}{get\+\_\+keypoints\+\_\+from\+\_\+optical\+\_\+flow}} (const std\+::vector$<$ cv\+::\+Mat $>$ \&image\+Previous\+Pyramide, const std\+::vector$<$ cv\+::\+Mat $>$ \&image\+Current\+Pyramide, const \mbox{\hyperlink{structrgbd__slam_1_1features_1_1keypoints_1_1_keypoints_with_id_struct}{Keypoints\+With\+Id\+Struct}} \&last\+Keypoints\+With\+Ids, const uint pyramid\+Depth, const uint window\+Size, const double max\+Distance\+Threshold, \mbox{\hyperlink{structrgbd__slam_1_1features_1_1keypoints_1_1_keypoints_with_id_struct}{Keypoints\+With\+Id\+Struct}} \&keypoint\+Struct)
\begin{DoxyCompactList}\small\item\em Compute the current frame keypoints from optical flow. There is need for matching with this configuration. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
A class to detect and track keypoints. This class will detect keypoints in gray images, compute descriptors and track those points using optical flow and/or descriptor matching. 

\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classrgbd__slam_1_1features_1_1keypoints_1_1_key___point___extraction_adf8a35140fc380cc46b4c7a1f5e5abc8}\label{classrgbd__slam_1_1features_1_1keypoints_1_1_key___point___extraction_adf8a35140fc380cc46b4c7a1f5e5abc8}} 
\index{rgbd\_slam::features::keypoints::Key\_Point\_Extraction@{rgbd\_slam::features::keypoints::Key\_Point\_Extraction}!Key\_Point\_Extraction@{Key\_Point\_Extraction}}
\index{Key\_Point\_Extraction@{Key\_Point\_Extraction}!rgbd\_slam::features::keypoints::Key\_Point\_Extraction@{rgbd\_slam::features::keypoints::Key\_Point\_Extraction}}
\doxysubsubsection{\texorpdfstring{Key\_Point\_Extraction()}{Key\_Point\_Extraction()}}
{\footnotesize\ttfamily rgbd\+\_\+slam\+::features\+::keypoints\+::\+Key\+\_\+\+Point\+\_\+\+Extraction\+::\+Key\+\_\+\+Point\+\_\+\+Extraction (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classrgbd__slam_1_1features_1_1keypoints_1_1_key___point___extraction_a41ff5b3e5511b495d5bbb94d4048c5de}\label{classrgbd__slam_1_1features_1_1keypoints_1_1_key___point___extraction_a41ff5b3e5511b495d5bbb94d4048c5de}} 
\index{rgbd\_slam::features::keypoints::Key\_Point\_Extraction@{rgbd\_slam::features::keypoints::Key\_Point\_Extraction}!compute\_key\_point\_mask@{compute\_key\_point\_mask}}
\index{compute\_key\_point\_mask@{compute\_key\_point\_mask}!rgbd\_slam::features::keypoints::Key\_Point\_Extraction@{rgbd\_slam::features::keypoints::Key\_Point\_Extraction}}
\doxysubsubsection{\texorpdfstring{compute\_key\_point\_mask()}{compute\_key\_point\_mask()}}
{\footnotesize\ttfamily const cv\+::\+Mat rgbd\+\_\+slam\+::features\+::keypoints\+::\+Key\+\_\+\+Point\+\_\+\+Extraction\+::compute\+\_\+key\+\_\+point\+\_\+mask (\begin{DoxyParamCaption}\item[{const cv\+::\+Size}]{image\+Size,  }\item[{const std\+::vector$<$ cv\+::\+Point2f $>$ \&}]{keypoint\+Container }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{classrgbd__slam_1_1features_1_1keypoints_1_1_key___point___extraction_aca210323ab089b71468435f136d96aad}\label{classrgbd__slam_1_1features_1_1keypoints_1_1_key___point___extraction_aca210323ab089b71468435f136d96aad}} 
\index{rgbd\_slam::features::keypoints::Key\_Point\_Extraction@{rgbd\_slam::features::keypoints::Key\_Point\_Extraction}!compute\_keypoints@{compute\_keypoints}}
\index{compute\_keypoints@{compute\_keypoints}!rgbd\_slam::features::keypoints::Key\_Point\_Extraction@{rgbd\_slam::features::keypoints::Key\_Point\_Extraction}}
\doxysubsubsection{\texorpdfstring{compute\_keypoints()}{compute\_keypoints()}}
{\footnotesize\ttfamily const \mbox{\hyperlink{classrgbd__slam_1_1features_1_1keypoints_1_1_keypoint___handler}{Keypoint\+\_\+\+Handler}} rgbd\+\_\+slam\+::features\+::keypoints\+::\+Key\+\_\+\+Point\+\_\+\+Extraction\+::compute\+\_\+keypoints (\begin{DoxyParamCaption}\item[{const cv\+::\+Mat \&}]{gray\+Image,  }\item[{const cv\+::\+Mat \&}]{depth\+Image,  }\item[{const \mbox{\hyperlink{structrgbd__slam_1_1features_1_1keypoints_1_1_keypoints_with_id_struct}{Keypoints\+With\+Id\+Struct}} \&}]{last\+Keypoints\+With\+Ids,  }\item[{const bool}]{force\+Keypoint\+Detection = {\ttfamily false} }\end{DoxyParamCaption})}



compute the keypoints in the gray image, using optical flow and/or generic feature detectors 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em gray\+Image} & The input image from camera \\
\hline
\mbox{\texttt{ in}}  & {\em depth\+Image} & The input depth image from camera \\
\hline
\mbox{\texttt{ in}}  & {\em last\+Keypoints\+With\+Ids} & The keypoints of the previous detection step, that will be tracked with optical flow\\
\hline
\mbox{\texttt{ in}}  & {\em force\+Keypoint\+Detection} & Force the detection of keypoints in the image\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
An object that contains the detected keypoints 
\end{DoxyReturn}
DESCRIPTORS\mbox{\Hypertarget{classrgbd__slam_1_1features_1_1keypoints_1_1_key___point___extraction_a3dd4e2a25365bca3f79c605ac069503c}\label{classrgbd__slam_1_1features_1_1keypoints_1_1_key___point___extraction_a3dd4e2a25365bca3f79c605ac069503c}} 
\index{rgbd\_slam::features::keypoints::Key\_Point\_Extraction@{rgbd\_slam::features::keypoints::Key\_Point\_Extraction}!detect\_keypoints@{detect\_keypoints}}
\index{detect\_keypoints@{detect\_keypoints}!rgbd\_slam::features::keypoints::Key\_Point\_Extraction@{rgbd\_slam::features::keypoints::Key\_Point\_Extraction}}
\doxysubsubsection{\texorpdfstring{detect\_keypoints()}{detect\_keypoints()}}
{\footnotesize\ttfamily const std\+::vector$<$ cv\+::\+Point2f $>$ rgbd\+\_\+slam\+::features\+::keypoints\+::\+Key\+\_\+\+Point\+\_\+\+Extraction\+::detect\+\_\+keypoints (\begin{DoxyParamCaption}\item[{const cv\+::\+Mat \&}]{gray\+Image,  }\item[{const cv\+::\+Mat \&}]{mask,  }\item[{const uint}]{minimum\+Points\+For\+Validity }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [protected]}}



Compute new key point, with an optional mask to exclude detection zones. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em gray\+Image} & The image in which we want to detect waypoints \\
\hline
\mbox{\texttt{ in}}  & {\em mask} & The mask which we do not want to detect waypoints \\
\hline
\mbox{\texttt{ in}}  & {\em minimum\+Points\+For\+Validity} & The minimum number of points under which we will use the precise detector \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
An array of points in the input image 
\end{DoxyReturn}
\mbox{\Hypertarget{classrgbd__slam_1_1features_1_1keypoints_1_1_key___point___extraction_ac39cdfc1afc1fafa4aecc02754593450}\label{classrgbd__slam_1_1features_1_1keypoints_1_1_key___point___extraction_ac39cdfc1afc1fafa4aecc02754593450}} 
\index{rgbd\_slam::features::keypoints::Key\_Point\_Extraction@{rgbd\_slam::features::keypoints::Key\_Point\_Extraction}!get\_keypoints\_from\_optical\_flow@{get\_keypoints\_from\_optical\_flow}}
\index{get\_keypoints\_from\_optical\_flow@{get\_keypoints\_from\_optical\_flow}!rgbd\_slam::features::keypoints::Key\_Point\_Extraction@{rgbd\_slam::features::keypoints::Key\_Point\_Extraction}}
\doxysubsubsection{\texorpdfstring{get\_keypoints\_from\_optical\_flow()}{get\_keypoints\_from\_optical\_flow()}}
{\footnotesize\ttfamily void rgbd\+\_\+slam\+::features\+::keypoints\+::\+Key\+\_\+\+Point\+\_\+\+Extraction\+::get\+\_\+keypoints\+\_\+from\+\_\+optical\+\_\+flow (\begin{DoxyParamCaption}\item[{const std\+::vector$<$ cv\+::\+Mat $>$ \&}]{image\+Previous\+Pyramide,  }\item[{const std\+::vector$<$ cv\+::\+Mat $>$ \&}]{image\+Current\+Pyramide,  }\item[{const \mbox{\hyperlink{structrgbd__slam_1_1features_1_1keypoints_1_1_keypoints_with_id_struct}{Keypoints\+With\+Id\+Struct}} \&}]{last\+Keypoints\+With\+Ids,  }\item[{const uint}]{pyramid\+Depth,  }\item[{const uint}]{window\+Size,  }\item[{const double}]{max\+Distance\+Threshold,  }\item[{\mbox{\hyperlink{structrgbd__slam_1_1features_1_1keypoints_1_1_keypoints_with_id_struct}{Keypoints\+With\+Id\+Struct}} \&}]{keypoint\+Struct }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [protected]}}



Compute the current frame keypoints from optical flow. There is need for matching with this configuration. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em image\+Previous\+Pyramide} & The pyramid representation of the previous image \\
\hline
\mbox{\texttt{ in}}  & {\em image\+Current\+Pyramide} & The pyramid representation of the current image to analyze \\
\hline
\mbox{\texttt{ in}}  & {\em last\+Keypoints\+With\+Ids} & The keypoints detected in image\+Previous \\
\hline
\mbox{\texttt{ in}}  & {\em pyramid\+Depth} & The chosen depth of the image pyramids \\
\hline
\mbox{\texttt{ in}}  & {\em window\+Size} & The chosen size of the optical flow window \\
\hline
\mbox{\texttt{ in}}  & {\em max\+Distance\+Threshold} & a distance threshold, in pixels \\
\hline
\mbox{\texttt{ out}}  & {\em keypoint\+Struct} & The keypoints tracked by optical flow \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classrgbd__slam_1_1features_1_1keypoints_1_1_key___point___extraction_a6e524bd7df260bcced969b179ae84e5e}\label{classrgbd__slam_1_1features_1_1keypoints_1_1_key___point___extraction_a6e524bd7df260bcced969b179ae84e5e}} 
\index{rgbd\_slam::features::keypoints::Key\_Point\_Extraction@{rgbd\_slam::features::keypoints::Key\_Point\_Extraction}!perform\_keypoint\_detection@{perform\_keypoint\_detection}}
\index{perform\_keypoint\_detection@{perform\_keypoint\_detection}!rgbd\_slam::features::keypoints::Key\_Point\_Extraction@{rgbd\_slam::features::keypoints::Key\_Point\_Extraction}}
\doxysubsubsection{\texorpdfstring{perform\_keypoint\_detection()}{perform\_keypoint\_detection()}}
{\footnotesize\ttfamily void rgbd\+\_\+slam\+::features\+::keypoints\+::\+Key\+\_\+\+Point\+\_\+\+Extraction\+::perform\+\_\+keypoint\+\_\+detection (\begin{DoxyParamCaption}\item[{const cv\+::\+Mat \&}]{gray\+Image,  }\item[{const cv\+::\+Mat \&}]{mask,  }\item[{const cv\+::\+Ptr$<$ cv\+::\+Feature\+Detector $>$ \&}]{feature\+Detector,  }\item[{std\+::vector$<$ cv\+::\+Key\+Point $>$ \&}]{frame\+Keypoints }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [protected]}}



Perform keypoint detection on the image, divided in smaller patches. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em gray\+Image} & Image in which to detect keypoints \\
\hline
\mbox{\texttt{ in}}  & {\em mask} & Mask of the image in which to detect keypoints. No keypoints will be detected in this area\\
\hline
\mbox{\texttt{ in}}  & {\em feature\+Detector} & The feature detector to use\\
\hline
\mbox{\texttt{ out}}  & {\em frame\+Keypoints} & the detected keypoints in the image \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classrgbd__slam_1_1features_1_1keypoints_1_1_key___point___extraction_a7c1fbb870b6cde4b7ed30fc3195d669e}\label{classrgbd__slam_1_1features_1_1keypoints_1_1_key___point___extraction_a7c1fbb870b6cde4b7ed30fc3195d669e}} 
\index{rgbd\_slam::features::keypoints::Key\_Point\_Extraction@{rgbd\_slam::features::keypoints::Key\_Point\_Extraction}!show\_statistics@{show\_statistics}}
\index{show\_statistics@{show\_statistics}!rgbd\_slam::features::keypoints::Key\_Point\_Extraction@{rgbd\_slam::features::keypoints::Key\_Point\_Extraction}}
\doxysubsubsection{\texorpdfstring{show\_statistics()}{show\_statistics()}}
{\footnotesize\ttfamily void rgbd\+\_\+slam\+::features\+::keypoints\+::\+Key\+\_\+\+Point\+\_\+\+Extraction\+::show\+\_\+statistics (\begin{DoxyParamCaption}\item[{const double}]{mean\+Frame\+Treatment\+Duration,  }\item[{const uint}]{frame\+Count }\end{DoxyParamCaption}) const}



Show the time statistics for certain parts of the program. Kind of a basic profiler. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em mean\+Frame\+Treatment\+Duration} & The mean duration in seconds that this program used to treat one frame\\
\hline
\mbox{\texttt{ in}}  & {\em frame\+Count} & Total of frame treated by the program \\
\hline
\end{DoxyParams}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/home/baptisteh/\+Documents/code/robots/\+RGB\+\_\+\+SLAM/\+RGB-\/\+D-\/\+SLAM/src/features/keypoints/\mbox{\hyperlink{keypoint__detection_8hpp}{keypoint\+\_\+detection.\+hpp}}\item 
/home/baptisteh/\+Documents/code/robots/\+RGB\+\_\+\+SLAM/\+RGB-\/\+D-\/\+SLAM/src/features/keypoints/\mbox{\hyperlink{keypoint__detection_8cpp}{keypoint\+\_\+detection.\+cpp}}\end{DoxyCompactItemize}
