\doxysection{rgbd\+\_\+slam\+::features\+::keypoints\+::Key\+\_\+\+Point\+\_\+\+Extraction Class Reference}
\hypertarget{classrgbd__slam_1_1features_1_1keypoints_1_1_key___point___extraction}{}\label{classrgbd__slam_1_1features_1_1keypoints_1_1_key___point___extraction}\index{rgbd\_slam::features::keypoints::Key\_Point\_Extraction@{rgbd\_slam::features::keypoints::Key\_Point\_Extraction}}


A class to detect and track keypoints. This class will detect keypoints in gray images, compute descriptors and track those points using optical flow and/or descriptor matching.  




{\ttfamily \#include $<$keypoint\+\_\+detection.\+hpp$>$}

\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classrgbd__slam_1_1features_1_1keypoints_1_1_key___point___extraction_adf8a35140fc380cc46b4c7a1f5e5abc8}{Key\+\_\+\+Point\+\_\+\+Extraction}} ()
\item 
\mbox{\hyperlink{classrgbd__slam_1_1features_1_1keypoints_1_1_keypoint___handler}{Keypoint\+\_\+\+Handler}} \mbox{\hyperlink{classrgbd__slam_1_1features_1_1keypoints_1_1_key___point___extraction_ad9efd1e5cd3a95375663ee00cbf9f23c}{compute\+\_\+keypoints}} (const cv\+::\+Mat \&gray\+Image, const cv\+::\+Mat\+\_\+$<$ float $>$ \&depth\+Image, const \mbox{\hyperlink{structrgbd__slam_1_1features_1_1keypoints_1_1_keypoints_with_id_struct}{Keypoints\+With\+Id\+Struct}} \&last\+Keypoints\+With\+Ids, const bool force\+Keypoint\+Detection=false) noexcept
\begin{DoxyCompactList}\small\item\em compute the keypoints in the gray image, using optical flow and/or generic feature detectors \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classrgbd__slam_1_1features_1_1keypoints_1_1_key___point___extraction_af2a0e9a727ae025b83ec49595738bf14}{show\+\_\+statistics}} (const double mean\+Frame\+Treatment\+Duration, const uint frame\+Count, const bool should\+Display\+Details=false) const noexcept
\begin{DoxyCompactList}\small\item\em Show the time statistics for certain parts of the program. Kind of a basic profiler. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
std\+::vector$<$ cv\+::\+Point2f $>$ \mbox{\hyperlink{classrgbd__slam_1_1features_1_1keypoints_1_1_key___point___extraction_a3dd17b8809f72dfccf19c7a683ba0a97}{detect\+\_\+keypoints}} (const cv\+::\+Mat \&gray\+Image, const cv\+::\+Mat\+\_\+$<$ uchar $>$ \&mask) const noexcept
\begin{DoxyCompactList}\small\item\em Compute new key point, with an optional mask to exclude detection zones. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classrgbd__slam_1_1features_1_1keypoints_1_1_key___point___extraction_a773c6a3f5cf7d3d9072921d5379ba452}{perform\+\_\+keypoint\+\_\+detection}} (const cv\+::\+Mat \&gray\+Image, const cv\+::\+Mat\+\_\+$<$ uchar $>$ \&mask, std\+::vector$<$ cv\+::\+Key\+Point $>$ \&frame\+Keypoints) const noexcept
\begin{DoxyCompactList}\small\item\em Perform keypoint detection on the image, divided in smaller patches. \end{DoxyCompactList}\item 
cv\+::\+Mat\+\_\+$<$ uchar $>$ \mbox{\hyperlink{classrgbd__slam_1_1features_1_1keypoints_1_1_key___point___extraction_a221ade8e21ddd75719aedbc886f12661}{compute\+\_\+key\+\_\+point\+\_\+mask}} (const cv\+::\+Size image\+Size, const std\+::vector$<$ cv\+::\+Point2f $>$ \&keypoint\+Container) const noexcept
\end{DoxyCompactItemize}
\doxysubsubsection*{Static Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
static void \mbox{\hyperlink{classrgbd__slam_1_1features_1_1keypoints_1_1_key___point___extraction_a6f136954f3db17de9bcb25c2f84f07e4}{get\+\_\+keypoints\+\_\+from\+\_\+optical\+\_\+flow}} (const std\+::vector$<$ cv\+::\+Mat $>$ \&image\+Previous\+Pyramide, const std\+::vector$<$ cv\+::\+Mat $>$ \&image\+Current\+Pyramide, const \mbox{\hyperlink{structrgbd__slam_1_1features_1_1keypoints_1_1_keypoints_with_id_struct}{Keypoints\+With\+Id\+Struct}} \&last\+Keypoints\+With\+Ids, const uint pyramid\+Depth, const cv\+::\+Size \&window\+Size\+Object, const double max\+Distance\+Threshold, \mbox{\hyperlink{structrgbd__slam_1_1features_1_1keypoints_1_1_keypoints_with_id_struct}{Keypoints\+With\+Id\+Struct}} \&keypoint\+Struct) noexcept
\begin{DoxyCompactList}\small\item\em Compute the current frame keypoints from optical flow. There is need for matching with this configuration. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Static Protected Attributes}
\begin{DoxyCompactItemize}
\item 
static constexpr uint \mbox{\hyperlink{classrgbd__slam_1_1features_1_1keypoints_1_1_key___point___extraction_a1d525f0abd1cc1403d08f52b59a7a86b}{number\+Of\+Detection\+Cells}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
A class to detect and track keypoints. This class will detect keypoints in gray images, compute descriptors and track those points using optical flow and/or descriptor matching. 

\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classrgbd__slam_1_1features_1_1keypoints_1_1_key___point___extraction_adf8a35140fc380cc46b4c7a1f5e5abc8}\label{classrgbd__slam_1_1features_1_1keypoints_1_1_key___point___extraction_adf8a35140fc380cc46b4c7a1f5e5abc8} 
\index{rgbd\_slam::features::keypoints::Key\_Point\_Extraction@{rgbd\_slam::features::keypoints::Key\_Point\_Extraction}!Key\_Point\_Extraction@{Key\_Point\_Extraction}}
\index{Key\_Point\_Extraction@{Key\_Point\_Extraction}!rgbd\_slam::features::keypoints::Key\_Point\_Extraction@{rgbd\_slam::features::keypoints::Key\_Point\_Extraction}}
\doxysubsubsection{\texorpdfstring{Key\_Point\_Extraction()}{Key\_Point\_Extraction()}}
{\footnotesize\ttfamily rgbd\+\_\+slam\+::features\+::keypoints\+::\+Key\+\_\+\+Point\+\_\+\+Extraction\+::\+Key\+\_\+\+Point\+\_\+\+Extraction (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



\doxysubsection{Member Function Documentation}
\Hypertarget{classrgbd__slam_1_1features_1_1keypoints_1_1_key___point___extraction_a221ade8e21ddd75719aedbc886f12661}\label{classrgbd__slam_1_1features_1_1keypoints_1_1_key___point___extraction_a221ade8e21ddd75719aedbc886f12661} 
\index{rgbd\_slam::features::keypoints::Key\_Point\_Extraction@{rgbd\_slam::features::keypoints::Key\_Point\_Extraction}!compute\_key\_point\_mask@{compute\_key\_point\_mask}}
\index{compute\_key\_point\_mask@{compute\_key\_point\_mask}!rgbd\_slam::features::keypoints::Key\_Point\_Extraction@{rgbd\_slam::features::keypoints::Key\_Point\_Extraction}}
\doxysubsubsection{\texorpdfstring{compute\_key\_point\_mask()}{compute\_key\_point\_mask()}}
{\footnotesize\ttfamily cv\+::\+Mat\+\_\+$<$ uchar $>$ rgbd\+\_\+slam\+::features\+::keypoints\+::\+Key\+\_\+\+Point\+\_\+\+Extraction\+::compute\+\_\+key\+\_\+point\+\_\+mask (\begin{DoxyParamCaption}\item[{const cv\+::\+Size}]{image\+Size,  }\item[{const std\+::vector$<$ cv\+::\+Point2f $>$ \&}]{keypoint\+Container }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [noexcept]}}

\Hypertarget{classrgbd__slam_1_1features_1_1keypoints_1_1_key___point___extraction_ad9efd1e5cd3a95375663ee00cbf9f23c}\label{classrgbd__slam_1_1features_1_1keypoints_1_1_key___point___extraction_ad9efd1e5cd3a95375663ee00cbf9f23c} 
\index{rgbd\_slam::features::keypoints::Key\_Point\_Extraction@{rgbd\_slam::features::keypoints::Key\_Point\_Extraction}!compute\_keypoints@{compute\_keypoints}}
\index{compute\_keypoints@{compute\_keypoints}!rgbd\_slam::features::keypoints::Key\_Point\_Extraction@{rgbd\_slam::features::keypoints::Key\_Point\_Extraction}}
\doxysubsubsection{\texorpdfstring{compute\_keypoints()}{compute\_keypoints()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classrgbd__slam_1_1features_1_1keypoints_1_1_keypoint___handler}{Keypoint\+\_\+\+Handler}} rgbd\+\_\+slam\+::features\+::keypoints\+::\+Key\+\_\+\+Point\+\_\+\+Extraction\+::compute\+\_\+keypoints (\begin{DoxyParamCaption}\item[{const cv\+::\+Mat \&}]{gray\+Image,  }\item[{const cv\+::\+Mat\+\_\+$<$ float $>$ \&}]{depth\+Image,  }\item[{const \mbox{\hyperlink{structrgbd__slam_1_1features_1_1keypoints_1_1_keypoints_with_id_struct}{Keypoints\+With\+Id\+Struct}} \&}]{last\+Keypoints\+With\+Ids,  }\item[{const bool}]{force\+Keypoint\+Detection = {\ttfamily false} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [noexcept]}}



compute the keypoints in the gray image, using optical flow and/or generic feature detectors 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em gray\+Image} & The input image from camera \\
\hline
\mbox{\texttt{ in}}  & {\em depth\+Image} & The input depth image from camera \\
\hline
\mbox{\texttt{ in}}  & {\em last\+Keypoints\+With\+Ids} & The keypoints of the previous detection step, that will be tracked with optical flow \\
\hline
\mbox{\texttt{ in}}  & {\em force\+Keypoint\+Detection} & Force the detection of keypoints in the image\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
An object that contains the detected keypoints 
\end{DoxyReturn}
DESCRIPTORS\Hypertarget{classrgbd__slam_1_1features_1_1keypoints_1_1_key___point___extraction_a3dd17b8809f72dfccf19c7a683ba0a97}\label{classrgbd__slam_1_1features_1_1keypoints_1_1_key___point___extraction_a3dd17b8809f72dfccf19c7a683ba0a97} 
\index{rgbd\_slam::features::keypoints::Key\_Point\_Extraction@{rgbd\_slam::features::keypoints::Key\_Point\_Extraction}!detect\_keypoints@{detect\_keypoints}}
\index{detect\_keypoints@{detect\_keypoints}!rgbd\_slam::features::keypoints::Key\_Point\_Extraction@{rgbd\_slam::features::keypoints::Key\_Point\_Extraction}}
\doxysubsubsection{\texorpdfstring{detect\_keypoints()}{detect\_keypoints()}}
{\footnotesize\ttfamily std\+::vector$<$ cv\+::\+Point2f $>$ rgbd\+\_\+slam\+::features\+::keypoints\+::\+Key\+\_\+\+Point\+\_\+\+Extraction\+::detect\+\_\+keypoints (\begin{DoxyParamCaption}\item[{const cv\+::\+Mat \&}]{gray\+Image,  }\item[{const cv\+::\+Mat\+\_\+$<$ uchar $>$ \&}]{mask }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [noexcept]}}



Compute new key point, with an optional mask to exclude detection zones. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em gray\+Image} & The image in which we want to detect waypoints \\
\hline
\mbox{\texttt{ in}}  & {\em mask} & The mask which we do not want to detect waypoints detector \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
An array of points in the input image 
\end{DoxyReturn}
\Hypertarget{classrgbd__slam_1_1features_1_1keypoints_1_1_key___point___extraction_a6f136954f3db17de9bcb25c2f84f07e4}\label{classrgbd__slam_1_1features_1_1keypoints_1_1_key___point___extraction_a6f136954f3db17de9bcb25c2f84f07e4} 
\index{rgbd\_slam::features::keypoints::Key\_Point\_Extraction@{rgbd\_slam::features::keypoints::Key\_Point\_Extraction}!get\_keypoints\_from\_optical\_flow@{get\_keypoints\_from\_optical\_flow}}
\index{get\_keypoints\_from\_optical\_flow@{get\_keypoints\_from\_optical\_flow}!rgbd\_slam::features::keypoints::Key\_Point\_Extraction@{rgbd\_slam::features::keypoints::Key\_Point\_Extraction}}
\doxysubsubsection{\texorpdfstring{get\_keypoints\_from\_optical\_flow()}{get\_keypoints\_from\_optical\_flow()}}
{\footnotesize\ttfamily void rgbd\+\_\+slam\+::features\+::keypoints\+::\+Key\+\_\+\+Point\+\_\+\+Extraction\+::get\+\_\+keypoints\+\_\+from\+\_\+optical\+\_\+flow (\begin{DoxyParamCaption}\item[{const std\+::vector$<$ cv\+::\+Mat $>$ \&}]{image\+Previous\+Pyramide,  }\item[{const std\+::vector$<$ cv\+::\+Mat $>$ \&}]{image\+Current\+Pyramide,  }\item[{const \mbox{\hyperlink{structrgbd__slam_1_1features_1_1keypoints_1_1_keypoints_with_id_struct}{Keypoints\+With\+Id\+Struct}} \&}]{last\+Keypoints\+With\+Ids,  }\item[{const uint}]{pyramid\+Depth,  }\item[{const cv\+::\+Size \&}]{window\+Size\+Object,  }\item[{const double}]{max\+Distance\+Threshold,  }\item[{\mbox{\hyperlink{structrgbd__slam_1_1features_1_1keypoints_1_1_keypoints_with_id_struct}{Keypoints\+With\+Id\+Struct}} \&}]{keypoint\+Struct }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [protected]}, {\ttfamily [noexcept]}}



Compute the current frame keypoints from optical flow. There is need for matching with this configuration. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em image\+Previous\+Pyramide} & The pyramid representation of the previous image \\
\hline
\mbox{\texttt{ in}}  & {\em image\+Current\+Pyramide} & The pyramid representation of the current image to analyze \\
\hline
\mbox{\texttt{ in}}  & {\em last\+Keypoints\+With\+Ids} & The keypoints detected in image\+Previous \\
\hline
\mbox{\texttt{ in}}  & {\em pyramid\+Depth} & The chosen depth of the image pyramids \\
\hline
\mbox{\texttt{ in}}  & {\em window\+Size\+Object} & The chosen size of the optical flow window \\
\hline
\mbox{\texttt{ in}}  & {\em max\+Distance\+Threshold} & a distance threshold, in pixels \\
\hline
\mbox{\texttt{ out}}  & {\em keypoint\+Struct} & The keypoints tracked by optical flow \\
\hline
\end{DoxyParams}
\Hypertarget{classrgbd__slam_1_1features_1_1keypoints_1_1_key___point___extraction_a773c6a3f5cf7d3d9072921d5379ba452}\label{classrgbd__slam_1_1features_1_1keypoints_1_1_key___point___extraction_a773c6a3f5cf7d3d9072921d5379ba452} 
\index{rgbd\_slam::features::keypoints::Key\_Point\_Extraction@{rgbd\_slam::features::keypoints::Key\_Point\_Extraction}!perform\_keypoint\_detection@{perform\_keypoint\_detection}}
\index{perform\_keypoint\_detection@{perform\_keypoint\_detection}!rgbd\_slam::features::keypoints::Key\_Point\_Extraction@{rgbd\_slam::features::keypoints::Key\_Point\_Extraction}}
\doxysubsubsection{\texorpdfstring{perform\_keypoint\_detection()}{perform\_keypoint\_detection()}}
{\footnotesize\ttfamily void rgbd\+\_\+slam\+::features\+::keypoints\+::\+Key\+\_\+\+Point\+\_\+\+Extraction\+::perform\+\_\+keypoint\+\_\+detection (\begin{DoxyParamCaption}\item[{const cv\+::\+Mat \&}]{gray\+Image,  }\item[{const cv\+::\+Mat\+\_\+$<$ uchar $>$ \&}]{mask,  }\item[{std\+::vector$<$ cv\+::\+Key\+Point $>$ \&}]{frame\+Keypoints }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [noexcept]}}



Perform keypoint detection on the image, divided in smaller patches. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em gray\+Image} & Image in which to detect keypoints \\
\hline
\mbox{\texttt{ in}}  & {\em mask} & Mask of the image in which to detect keypoints. No keypoints will be detected in this \\
\hline
\mbox{\texttt{ out}}  & {\em frame\+Keypoints} & The keypoint detected in this process keypoints in the image \\
\hline
\end{DoxyParams}
\Hypertarget{classrgbd__slam_1_1features_1_1keypoints_1_1_key___point___extraction_af2a0e9a727ae025b83ec49595738bf14}\label{classrgbd__slam_1_1features_1_1keypoints_1_1_key___point___extraction_af2a0e9a727ae025b83ec49595738bf14} 
\index{rgbd\_slam::features::keypoints::Key\_Point\_Extraction@{rgbd\_slam::features::keypoints::Key\_Point\_Extraction}!show\_statistics@{show\_statistics}}
\index{show\_statistics@{show\_statistics}!rgbd\_slam::features::keypoints::Key\_Point\_Extraction@{rgbd\_slam::features::keypoints::Key\_Point\_Extraction}}
\doxysubsubsection{\texorpdfstring{show\_statistics()}{show\_statistics()}}
{\footnotesize\ttfamily void rgbd\+\_\+slam\+::features\+::keypoints\+::\+Key\+\_\+\+Point\+\_\+\+Extraction\+::show\+\_\+statistics (\begin{DoxyParamCaption}\item[{const double}]{mean\+Frame\+Treatment\+Duration,  }\item[{const uint}]{frame\+Count,  }\item[{const bool}]{should\+Display\+Details = {\ttfamily false} }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [noexcept]}}



Show the time statistics for certain parts of the program. Kind of a basic profiler. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em mean\+Frame\+Treatment\+Duration} & The mean duration in seconds that this program used to treat one frame \\
\hline
\mbox{\texttt{ in}}  & {\em frame\+Count} & Total of frame treated by the program \\
\hline
\mbox{\texttt{ in}}  & {\em should\+Display\+Details} & If true, will display additional monitoring informations \\
\hline
\end{DoxyParams}


\doxysubsection{Member Data Documentation}
\Hypertarget{classrgbd__slam_1_1features_1_1keypoints_1_1_key___point___extraction_a1d525f0abd1cc1403d08f52b59a7a86b}\label{classrgbd__slam_1_1features_1_1keypoints_1_1_key___point___extraction_a1d525f0abd1cc1403d08f52b59a7a86b} 
\index{rgbd\_slam::features::keypoints::Key\_Point\_Extraction@{rgbd\_slam::features::keypoints::Key\_Point\_Extraction}!numberOfDetectionCells@{numberOfDetectionCells}}
\index{numberOfDetectionCells@{numberOfDetectionCells}!rgbd\_slam::features::keypoints::Key\_Point\_Extraction@{rgbd\_slam::features::keypoints::Key\_Point\_Extraction}}
\doxysubsubsection{\texorpdfstring{numberOfDetectionCells}{numberOfDetectionCells}}
{\footnotesize\ttfamily constexpr uint rgbd\+\_\+slam\+::features\+::keypoints\+::\+Key\+\_\+\+Point\+\_\+\+Extraction\+::number\+Of\+Detection\+Cells\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [constexpr]}, {\ttfamily [protected]}}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{=\ \mbox{\hyperlink{namespacergbd__slam_1_1parameters_1_1detection_a58a53527a5861893bc07b540f2ebc3ff}{parameters::detection::keypointCellDetectionHeightCount}}\ *}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacergbd__slam_1_1parameters_1_1detection_a1ca69fcc3691ed6b94b96fa8a1bee75e}{parameters::detection::keypointCellDetectionWidthCount}}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/home/baptisteh/\+Documents/code/robots/\+RGB\+\_\+\+SLAM/\+RGB-\/\+D-\/\+SLAM/src/features/keypoints/\mbox{\hyperlink{keypoint__detection_8hpp}{keypoint\+\_\+detection.\+hpp}}\item 
/home/baptisteh/\+Documents/code/robots/\+RGB\+\_\+\+SLAM/\+RGB-\/\+D-\/\+SLAM/src/features/keypoints/\mbox{\hyperlink{keypoint__detection_8cpp}{keypoint\+\_\+detection.\+cpp}}\end{DoxyCompactItemize}
