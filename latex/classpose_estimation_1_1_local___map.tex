\hypertarget{classpose_estimation_1_1_local___map}{}\doxysection{pose\+Estimation\+::Local\+\_\+\+Map Class Reference}
\label{classpose_estimation_1_1_local___map}\index{poseEstimation::Local\_Map@{poseEstimation::Local\_Map}}


{\ttfamily \#include $<$Local\+Map.\+hpp$>$}

\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classpose_estimation_1_1_local___map_a21ab663584d1ea71f41fffd4ed3d37e5}{Local\+\_\+\+Map}} (const \mbox{\hyperlink{classpose_estimation_1_1_parameters}{Parameters}} \&voparams, \mbox{\hyperlink{classpose_estimation_1_1_image___features___handler}{Image\+\_\+\+Features\+\_\+\+Handler}} $\ast$feature\+Handler)
\begin{DoxyCompactList}\small\item\em Keeps a reference to the features\+Handler object. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classpose_estimation_1_1_local___map_a909b4a795f790ac573b996e33915d592}{$\sim$\+Local\+\_\+\+Map}} ()
\item 
void \mbox{\hyperlink{classpose_estimation_1_1_local___map_add0beb7387feab8cae3a8d0409b5e3a8}{reset}} ()
\item 
void \mbox{\hyperlink{classpose_estimation_1_1_local___map_a7d85d0ea9317c6271f5121698e7e5ae3}{update\+\_\+with\+\_\+new\+\_\+triangulation}} (const \mbox{\hyperlink{classpose_estimation_1_1_pose}{Pose}} \&cam\+Pose, \mbox{\hyperlink{classpose_estimation_1_1_image___features___struct}{Image\+\_\+\+Features\+\_\+\+Struct}} \&features, bool dont\+Stage=false)
\begin{DoxyCompactList}\small\item\em Triangulate new map points from refined pose and add them to the local map. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classpose_estimation_1_1_local___map_a43608e6e271b69bf6ffa681883231878}{update\+\_\+staged\+\_\+map\+\_\+points}} (const \mbox{\hyperlink{classpose_estimation_1_1_pose}{Pose}} \&cam\+Pose, \mbox{\hyperlink{classpose_estimation_1_1_image___features___struct}{Image\+\_\+\+Features\+\_\+\+Struct}} \&features)
\begin{DoxyCompactList}\small\item\em Add/remove features from staged points container if they are not tracked, or not visible from current position. Add new points to local map. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classpose_estimation_1_1_local___map_a448582996874728cf78c3116eb0a6ea6}{clean\+\_\+untracked\+\_\+points}} (\mbox{\hyperlink{classpose_estimation_1_1_image___features___struct}{Image\+\_\+\+Features\+\_\+\+Struct}} \&features)
\begin{DoxyCompactList}\small\item\em Mark untracked points as untracked in map, and add tracked points to local map. \end{DoxyCompactList}\item 
unsigned int \mbox{\hyperlink{classpose_estimation_1_1_local___map_a58a2b9aa46608bc7702cf399c9728638}{get\+\_\+map\+\_\+size}} () const
\item 
unsigned int \mbox{\hyperlink{classpose_estimation_1_1_local___map_aaae772d0e5fba904e83f575d2c612796}{get\+\_\+staged\+\_\+points\+\_\+count}} () const
\item 
unsigned int \mbox{\hyperlink{classpose_estimation_1_1_local___map_ae36322e3880f13bf2fade02614bb3031}{find\+\_\+matches}} (const \mbox{\hyperlink{classpose_estimation_1_1_pose}{Pose}} \&cam\+Pose, \mbox{\hyperlink{classpose_estimation_1_1_image___features___struct}{Image\+\_\+\+Features\+\_\+\+Struct}} \&features, \mbox{\hyperlink{namespacepose_estimation_a2928c0fea359ecbbaab89f4a1eec287e}{vector3\+\_\+array}} \&map\+Points, std\+::vector$<$ int $>$ \&matches\+Left)
\begin{DoxyCompactList}\small\item\em Compute point matches from current pose in the local map. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{classpose_estimation_1_1_local___map_a46adc4107af1e0a7092db555aa744b30}{triangulate\+\_\+rgbd}} (const \mbox{\hyperlink{classpose_estimation_1_1_pose}{Pose}} \&cam\+Pose, \mbox{\hyperlink{classpose_estimation_1_1_image___features___struct}{Image\+\_\+\+Features\+\_\+\+Struct}} \&features, map\+Point\+Array \&out\+Points)
\begin{DoxyCompactList}\small\item\em Create a container of new map points, that can be added to the local map, or staged. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classpose_estimation_1_1_local___map_a21ab663584d1ea71f41fffd4ed3d37e5}\label{classpose_estimation_1_1_local___map_a21ab663584d1ea71f41fffd4ed3d37e5}} 
\index{poseEstimation::Local\_Map@{poseEstimation::Local\_Map}!Local\_Map@{Local\_Map}}
\index{Local\_Map@{Local\_Map}!poseEstimation::Local\_Map@{poseEstimation::Local\_Map}}
\doxysubsubsection{\texorpdfstring{Local\_Map()}{Local\_Map()}}
{\footnotesize\ttfamily pose\+Estimation\+::\+Local\+\_\+\+Map\+::\+Local\+\_\+\+Map (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classpose_estimation_1_1_parameters}{Parameters}} \&}]{voparams,  }\item[{\mbox{\hyperlink{classpose_estimation_1_1_image___features___handler}{Image\+\_\+\+Features\+\_\+\+Handler}} $\ast$}]{feature\+Handler }\end{DoxyParamCaption})}



Keeps a reference to the features\+Handler object. 

\mbox{\Hypertarget{classpose_estimation_1_1_local___map_a909b4a795f790ac573b996e33915d592}\label{classpose_estimation_1_1_local___map_a909b4a795f790ac573b996e33915d592}} 
\index{poseEstimation::Local\_Map@{poseEstimation::Local\_Map}!````~Local\_Map@{$\sim$Local\_Map}}
\index{````~Local\_Map@{$\sim$Local\_Map}!poseEstimation::Local\_Map@{poseEstimation::Local\_Map}}
\doxysubsubsection{\texorpdfstring{$\sim$Local\_Map()}{~Local\_Map()}}
{\footnotesize\ttfamily pose\+Estimation\+::\+Local\+\_\+\+Map\+::$\sim$\+Local\+\_\+\+Map (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classpose_estimation_1_1_local___map_a448582996874728cf78c3116eb0a6ea6}\label{classpose_estimation_1_1_local___map_a448582996874728cf78c3116eb0a6ea6}} 
\index{poseEstimation::Local\_Map@{poseEstimation::Local\_Map}!clean\_untracked\_points@{clean\_untracked\_points}}
\index{clean\_untracked\_points@{clean\_untracked\_points}!poseEstimation::Local\_Map@{poseEstimation::Local\_Map}}
\doxysubsubsection{\texorpdfstring{clean\_untracked\_points()}{clean\_untracked\_points()}}
{\footnotesize\ttfamily void pose\+Estimation\+::\+Local\+\_\+\+Map\+::clean\+\_\+untracked\+\_\+points (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classpose_estimation_1_1_image___features___struct}{Image\+\_\+\+Features\+\_\+\+Struct}} \&}]{features }\end{DoxyParamCaption})}



Mark untracked points as untracked in map, and add tracked points to local map. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in,out}}  & {\em features} & \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classpose_estimation_1_1_local___map_ae36322e3880f13bf2fade02614bb3031}\label{classpose_estimation_1_1_local___map_ae36322e3880f13bf2fade02614bb3031}} 
\index{poseEstimation::Local\_Map@{poseEstimation::Local\_Map}!find\_matches@{find\_matches}}
\index{find\_matches@{find\_matches}!poseEstimation::Local\_Map@{poseEstimation::Local\_Map}}
\doxysubsubsection{\texorpdfstring{find\_matches()}{find\_matches()}}
{\footnotesize\ttfamily unsigned int pose\+Estimation\+::\+Local\+\_\+\+Map\+::find\+\_\+matches (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classpose_estimation_1_1_pose}{Pose}} \&}]{cam\+Pose,  }\item[{\mbox{\hyperlink{classpose_estimation_1_1_image___features___struct}{Image\+\_\+\+Features\+\_\+\+Struct}} \&}]{features,  }\item[{\mbox{\hyperlink{namespacepose_estimation_a2928c0fea359ecbbaab89f4a1eec287e}{vector3\+\_\+array}} \&}]{map\+Points,  }\item[{std\+::vector$<$ int $>$ \&}]{matches\+Left }\end{DoxyParamCaption})}



Compute point matches from current pose in the local map. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em cam\+Pose} & Position of the observer \\
\hline
\mbox{\texttt{ in,out}}  & {\em features} & Current image features \\
\hline
\mbox{\texttt{ out}}  & {\em map\+Points} & All points matched in map \\
\hline
\mbox{\texttt{ out}}  & {\em matches\+Left} & ID of the last frame matched points\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
matched point count 
\end{DoxyReturn}
\mbox{\Hypertarget{classpose_estimation_1_1_local___map_a58a2b9aa46608bc7702cf399c9728638}\label{classpose_estimation_1_1_local___map_a58a2b9aa46608bc7702cf399c9728638}} 
\index{poseEstimation::Local\_Map@{poseEstimation::Local\_Map}!get\_map\_size@{get\_map\_size}}
\index{get\_map\_size@{get\_map\_size}!poseEstimation::Local\_Map@{poseEstimation::Local\_Map}}
\doxysubsubsection{\texorpdfstring{get\_map\_size()}{get\_map\_size()}}
{\footnotesize\ttfamily unsigned int pose\+Estimation\+::\+Local\+\_\+\+Map\+::get\+\_\+map\+\_\+size (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

\mbox{\Hypertarget{classpose_estimation_1_1_local___map_aaae772d0e5fba904e83f575d2c612796}\label{classpose_estimation_1_1_local___map_aaae772d0e5fba904e83f575d2c612796}} 
\index{poseEstimation::Local\_Map@{poseEstimation::Local\_Map}!get\_staged\_points\_count@{get\_staged\_points\_count}}
\index{get\_staged\_points\_count@{get\_staged\_points\_count}!poseEstimation::Local\_Map@{poseEstimation::Local\_Map}}
\doxysubsubsection{\texorpdfstring{get\_staged\_points\_count()}{get\_staged\_points\_count()}}
{\footnotesize\ttfamily unsigned int pose\+Estimation\+::\+Local\+\_\+\+Map\+::get\+\_\+staged\+\_\+points\+\_\+count (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

\mbox{\Hypertarget{classpose_estimation_1_1_local___map_add0beb7387feab8cae3a8d0409b5e3a8}\label{classpose_estimation_1_1_local___map_add0beb7387feab8cae3a8d0409b5e3a8}} 
\index{poseEstimation::Local\_Map@{poseEstimation::Local\_Map}!reset@{reset}}
\index{reset@{reset}!poseEstimation::Local\_Map@{poseEstimation::Local\_Map}}
\doxysubsubsection{\texorpdfstring{reset()}{reset()}}
{\footnotesize\ttfamily void pose\+Estimation\+::\+Local\+\_\+\+Map\+::reset (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\mbox{\Hypertarget{classpose_estimation_1_1_local___map_a46adc4107af1e0a7092db555aa744b30}\label{classpose_estimation_1_1_local___map_a46adc4107af1e0a7092db555aa744b30}} 
\index{poseEstimation::Local\_Map@{poseEstimation::Local\_Map}!triangulate\_rgbd@{triangulate\_rgbd}}
\index{triangulate\_rgbd@{triangulate\_rgbd}!poseEstimation::Local\_Map@{poseEstimation::Local\_Map}}
\doxysubsubsection{\texorpdfstring{triangulate\_rgbd()}{triangulate\_rgbd()}}
{\footnotesize\ttfamily void pose\+Estimation\+::\+Local\+\_\+\+Map\+::triangulate\+\_\+rgbd (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classpose_estimation_1_1_pose}{Pose}} \&}]{cam\+Pose,  }\item[{\mbox{\hyperlink{classpose_estimation_1_1_image___features___struct}{Image\+\_\+\+Features\+\_\+\+Struct}} \&}]{features,  }\item[{map\+Point\+Array \&}]{out\+Points }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}



Create a container of new map points, that can be added to the local map, or staged. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em cam\+Pose} & Observer position, already refined \\
\hline
\mbox{\texttt{ in}}  & {\em features} & Detected features in RGB image \\
\hline
\mbox{\texttt{ out}}  & {\em out\+Points} & Container of new points, triangulated from true pose \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classpose_estimation_1_1_local___map_a43608e6e271b69bf6ffa681883231878}\label{classpose_estimation_1_1_local___map_a43608e6e271b69bf6ffa681883231878}} 
\index{poseEstimation::Local\_Map@{poseEstimation::Local\_Map}!update\_staged\_map\_points@{update\_staged\_map\_points}}
\index{update\_staged\_map\_points@{update\_staged\_map\_points}!poseEstimation::Local\_Map@{poseEstimation::Local\_Map}}
\doxysubsubsection{\texorpdfstring{update\_staged\_map\_points()}{update\_staged\_map\_points()}}
{\footnotesize\ttfamily void pose\+Estimation\+::\+Local\+\_\+\+Map\+::update\+\_\+staged\+\_\+map\+\_\+points (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classpose_estimation_1_1_pose}{Pose}} \&}]{cam\+Pose,  }\item[{\mbox{\hyperlink{classpose_estimation_1_1_image___features___struct}{Image\+\_\+\+Features\+\_\+\+Struct}} \&}]{features }\end{DoxyParamCaption})}



Add/remove features from staged points container if they are not tracked, or not visible from current position. Add new points to local map. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em cam\+Pose} & Position of the camera, already refined \\
\hline
\mbox{\texttt{ in,out}}  & {\em features} & Features to treat, can be marked as matched \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classpose_estimation_1_1_local___map_a7d85d0ea9317c6271f5121698e7e5ae3}\label{classpose_estimation_1_1_local___map_a7d85d0ea9317c6271f5121698e7e5ae3}} 
\index{poseEstimation::Local\_Map@{poseEstimation::Local\_Map}!update\_with\_new\_triangulation@{update\_with\_new\_triangulation}}
\index{update\_with\_new\_triangulation@{update\_with\_new\_triangulation}!poseEstimation::Local\_Map@{poseEstimation::Local\_Map}}
\doxysubsubsection{\texorpdfstring{update\_with\_new\_triangulation()}{update\_with\_new\_triangulation()}}
{\footnotesize\ttfamily void pose\+Estimation\+::\+Local\+\_\+\+Map\+::update\+\_\+with\+\_\+new\+\_\+triangulation (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classpose_estimation_1_1_pose}{Pose}} \&}]{cam\+Pose,  }\item[{\mbox{\hyperlink{classpose_estimation_1_1_image___features___struct}{Image\+\_\+\+Features\+\_\+\+Struct}} \&}]{features,  }\item[{bool}]{dont\+Stage = {\ttfamily false} }\end{DoxyParamCaption})}



Triangulate new map points from refined pose and add them to the local map. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em cam\+Pose} & Position of camera, already refined \\
\hline
\mbox{\texttt{ in}}  & {\em features} & \\
\hline
\mbox{\texttt{ in}}  & {\em dont\+Stage} & Dont store staged points \\
\hline
\end{DoxyParams}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/home/baptou/\+Documents/code/robots/\+RGB\+\_\+\+SLAM/\+RGB-\/\+D-\/\+SLAM/src/pose\+\_\+estimation/\mbox{\hyperlink{_local_map_8hpp}{Local\+Map.\+hpp}}\item 
/home/baptou/\+Documents/code/robots/\+RGB\+\_\+\+SLAM/\+RGB-\/\+D-\/\+SLAM/src/pose\+\_\+estimation/\mbox{\hyperlink{_local_map_8cpp}{Local\+Map.\+cpp}}\end{DoxyCompactItemize}
