\hypertarget{classrgbd__slam_1_1map__management_1_1_local___map}{}\doxysection{rgbd\+\_\+slam\+::map\+\_\+management\+::Local\+\_\+\+Map Class Reference}
\label{classrgbd__slam_1_1map__management_1_1_local___map}\index{rgbd\_slam::map\_management::Local\_Map@{rgbd\_slam::map\_management::Local\_Map}}


Maintain a local (around the camera) map. Handle the feature association and tracking in local space. Can return matched features, and update the global map when features are estimated to be reliable.  




{\ttfamily \#include $<$local\+\_\+map.\+hpp$>$}

\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classrgbd__slam_1_1map__management_1_1_local___map_a55f49d47df2e5c63d581786b64645ee6}{Local\+\_\+\+Map}} ()
\item 
\mbox{\hyperlink{classrgbd__slam_1_1map__management_1_1_local___map_aa418a6f97b3af08cc1738c599db63d27}{$\sim$\+Local\+\_\+\+Map}} ()
\item 
const \mbox{\hyperlink{structrgbd__slam_1_1features_1_1keypoints_1_1_keypoints_with_id_struct}{features\+::keypoints\+::\+Keypoints\+With\+Id\+Struct}} \mbox{\hyperlink{classrgbd__slam_1_1map__management_1_1_local___map_a50115cf37187dd54b7d1d0f66186883b}{get\+\_\+tracked\+\_\+keypoints\+\_\+features}} (const \mbox{\hyperlink{classrgbd__slam_1_1utils_1_1_pose}{utils\+::\+Pose}} \&lastpose) const
\begin{DoxyCompactList}\small\item\em Return an object containing the tracked keypoint features in screen space (2D), with the associated global ids. \end{DoxyCompactList}\item 
\mbox{\hyperlink{structrgbd__slam_1_1matches__containers_1_1match_container}{matches\+\_\+containers\+::match\+Container}} \mbox{\hyperlink{classrgbd__slam_1_1map__management_1_1_local___map_af34f0dc36c9e0e8c25fe5c22f4ef97c2}{find\+\_\+feature\+\_\+matches}} (const \mbox{\hyperlink{classrgbd__slam_1_1utils_1_1_pose}{utils\+::\+Pose}} \&current\+Pose, const \mbox{\hyperlink{classrgbd__slam_1_1features_1_1keypoints_1_1_keypoint___handler}{features\+::keypoints\+::\+Keypoint\+\_\+\+Handler}} \&detected\+Keypoints\+Object, const \mbox{\hyperlink{namespacergbd__slam_1_1features_1_1primitives_ac85a148cd872917385ff3d0622c8162d}{features\+::primitives\+::plane\+\_\+container}} \&detected\+Planes)
\begin{DoxyCompactList}\small\item\em Find all matches for the given detected features. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classrgbd__slam_1_1map__management_1_1_local___map_a9bfe08745c20ff961338a521cdc964d3}{update}} (const \mbox{\hyperlink{classrgbd__slam_1_1utils_1_1_pose}{utils\+::\+Pose}} \&optimized\+Pose, const \mbox{\hyperlink{classrgbd__slam_1_1features_1_1keypoints_1_1_keypoint___handler}{features\+::keypoints\+::\+Keypoint\+\_\+\+Handler}} \&keypoint\+Object, const \mbox{\hyperlink{namespacergbd__slam_1_1features_1_1primitives_ac85a148cd872917385ff3d0622c8162d}{features\+::primitives\+::plane\+\_\+container}} \&detected\+Planes, const \mbox{\hyperlink{namespacergbd__slam_1_1matches__containers_ab56afd18853a71d647cdd9564ac2ee73}{matches\+\_\+containers\+::match\+\_\+point\+\_\+container}} \&outlier\+Matched\+Points, const \mbox{\hyperlink{namespacergbd__slam_1_1matches__containers_a58801f59c64a14987579f745edbd3276}{matches\+\_\+containers\+::match\+\_\+plane\+\_\+container}} \&outlier\+Matched\+Planes)
\begin{DoxyCompactList}\small\item\em Update the local and global map. Add new points to staged and map container. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classrgbd__slam_1_1map__management_1_1_local___map_a561f96567193bf4de605a4406fac4732}{update\+\_\+no\+\_\+pose}} ()
\begin{DoxyCompactList}\small\item\em Update the local map when no pose could be estimated. Consider all features as unmatched. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classrgbd__slam_1_1map__management_1_1_local___map_a25f883f93567c81b529be6f1a5974bc9}{add\+\_\+features\+\_\+to\+\_\+map}} (const \mbox{\hyperlink{namespacergbd__slam_a2877fc3a278a20d5132bcd38e12faf69}{matrix33}} \&pose\+Covariance, const \mbox{\hyperlink{structrgbd__slam_1_1camera_to_world_matrix}{camera\+To\+World\+Matrix}} \&camera\+To\+World, const \mbox{\hyperlink{classrgbd__slam_1_1features_1_1keypoints_1_1_keypoint___handler}{features\+::keypoints\+::\+Keypoint\+\_\+\+Handler}} \&keypoint\+Object, const \mbox{\hyperlink{namespacergbd__slam_1_1features_1_1primitives_ac85a148cd872917385ff3d0622c8162d}{features\+::primitives\+::plane\+\_\+container}} \&detected\+Planes, const bool add\+All\+Features)
\begin{DoxyCompactList}\small\item\em Add features to staged map. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classrgbd__slam_1_1map__management_1_1_local___map_ad1073f3d16e8549024d939620831cc1e}{reset}} ()
\begin{DoxyCompactList}\small\item\em Hard clean the local and staged map. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classrgbd__slam_1_1map__management_1_1_local___map_a6a634da41117ea74edaa7bde12b1e55a}{get\+\_\+debug\+\_\+image}} (const \mbox{\hyperlink{classrgbd__slam_1_1utils_1_1_pose}{utils\+::\+Pose}} \&cam\+Pose, const bool should\+Display\+Staged, const bool should\+Display\+Plane\+Masks, cv\+::\+Mat \&debug\+Image) const
\begin{DoxyCompactList}\small\item\em Compute a debug image to display the keypoints \& planes. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{classrgbd__slam_1_1map__management_1_1_local___map_af62ebdf2d7be0eca02c759a8cc1ea602}{update\+\_\+local\+\_\+to\+\_\+global}} ()
\begin{DoxyCompactList}\small\item\em Clean the local map so it stays local, and update the global map with the good features. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classrgbd__slam_1_1map__management_1_1_local___map_a16e83ece0d2ecff380d377c260f82173}{draw\+\_\+image\+\_\+head\+\_\+band}} (cv\+::\+Mat \&debug\+Image) const
\begin{DoxyCompactList}\small\item\em draw the top information band on the debug image \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classrgbd__slam_1_1map__management_1_1_local___map_a6922aeab012e88206c07c2079eef442e}{mark\+\_\+outliers\+\_\+as\+\_\+unmatched}} (const \mbox{\hyperlink{namespacergbd__slam_1_1matches__containers_ab56afd18853a71d647cdd9564ac2ee73}{matches\+\_\+containers\+::match\+\_\+point\+\_\+container}} \&outlier\+Matched\+Points)
\begin{DoxyCompactList}\small\item\em Mark all the outliers detected during optimization as unmatched. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classrgbd__slam_1_1map__management_1_1_local___map_ab29cc38e6616e7b37129f584539e20e7}{mark\+\_\+outliers\+\_\+as\+\_\+unmatched}} (const \mbox{\hyperlink{namespacergbd__slam_1_1matches__containers_a58801f59c64a14987579f745edbd3276}{matches\+\_\+containers\+::match\+\_\+plane\+\_\+container}} \&outlier\+Matched\+Planes)
\begin{DoxyCompactList}\small\item\em Mark all the outliers detected during optimization as unmatched. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Maintain a local (around the camera) map. Handle the feature association and tracking in local space. Can return matched features, and update the global map when features are estimated to be reliable. 

\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classrgbd__slam_1_1map__management_1_1_local___map_a55f49d47df2e5c63d581786b64645ee6}\label{classrgbd__slam_1_1map__management_1_1_local___map_a55f49d47df2e5c63d581786b64645ee6}} 
\index{rgbd\_slam::map\_management::Local\_Map@{rgbd\_slam::map\_management::Local\_Map}!Local\_Map@{Local\_Map}}
\index{Local\_Map@{Local\_Map}!rgbd\_slam::map\_management::Local\_Map@{rgbd\_slam::map\_management::Local\_Map}}
\doxysubsubsection{\texorpdfstring{Local\_Map()}{Local\_Map()}}
{\footnotesize\ttfamily rgbd\+\_\+slam\+::map\+\_\+management\+::\+Local\+\_\+\+Map\+::\+Local\+\_\+\+Map (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\mbox{\Hypertarget{classrgbd__slam_1_1map__management_1_1_local___map_aa418a6f97b3af08cc1738c599db63d27}\label{classrgbd__slam_1_1map__management_1_1_local___map_aa418a6f97b3af08cc1738c599db63d27}} 
\index{rgbd\_slam::map\_management::Local\_Map@{rgbd\_slam::map\_management::Local\_Map}!````~Local\_Map@{$\sim$Local\_Map}}
\index{````~Local\_Map@{$\sim$Local\_Map}!rgbd\_slam::map\_management::Local\_Map@{rgbd\_slam::map\_management::Local\_Map}}
\doxysubsubsection{\texorpdfstring{$\sim$Local\_Map()}{~Local\_Map()}}
{\footnotesize\ttfamily rgbd\+\_\+slam\+::map\+\_\+management\+::\+Local\+\_\+\+Map\+::$\sim$\+Local\+\_\+\+Map (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classrgbd__slam_1_1map__management_1_1_local___map_a25f883f93567c81b529be6f1a5974bc9}\label{classrgbd__slam_1_1map__management_1_1_local___map_a25f883f93567c81b529be6f1a5974bc9}} 
\index{rgbd\_slam::map\_management::Local\_Map@{rgbd\_slam::map\_management::Local\_Map}!add\_features\_to\_map@{add\_features\_to\_map}}
\index{add\_features\_to\_map@{add\_features\_to\_map}!rgbd\_slam::map\_management::Local\_Map@{rgbd\_slam::map\_management::Local\_Map}}
\doxysubsubsection{\texorpdfstring{add\_features\_to\_map()}{add\_features\_to\_map()}}
{\footnotesize\ttfamily void rgbd\+\_\+slam\+::map\+\_\+management\+::\+Local\+\_\+\+Map\+::add\+\_\+features\+\_\+to\+\_\+map (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{namespacergbd__slam_a2877fc3a278a20d5132bcd38e12faf69}{matrix33}} \&}]{pose\+Covariance,  }\item[{const \mbox{\hyperlink{structrgbd__slam_1_1camera_to_world_matrix}{camera\+To\+World\+Matrix}} \&}]{camera\+To\+World,  }\item[{const \mbox{\hyperlink{classrgbd__slam_1_1features_1_1keypoints_1_1_keypoint___handler}{features\+::keypoints\+::\+Keypoint\+\_\+\+Handler}} \&}]{keypoint\+Object,  }\item[{const \mbox{\hyperlink{namespacergbd__slam_1_1features_1_1primitives_ac85a148cd872917385ff3d0622c8162d}{features\+::primitives\+::plane\+\_\+container}} \&}]{detected\+Planes,  }\item[{const bool}]{add\+All\+Features }\end{DoxyParamCaption})}



Add features to staged map. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em pose\+Covariance} & The pose covariance of the observer, after optimization \\
\hline
\mbox{\texttt{ in}}  & {\em camera\+To\+World} & The matrix to go from camera to world space \\
\hline
\mbox{\texttt{ in}}  & {\em keypoint\+Object} & An object containing the detected key points in the rgbd frame. Must be the same as in find\+\_\+keypoint\+\_\+matches \\
\hline
\mbox{\texttt{ in}}  & {\em detected\+Planes} & A container for all detected planes in the depth image \\
\hline
\mbox{\texttt{ in}}  & {\em add\+All\+Features} & If false, will add all non matched features, if true, add all features regardless of the match status \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classrgbd__slam_1_1map__management_1_1_local___map_a16e83ece0d2ecff380d377c260f82173}\label{classrgbd__slam_1_1map__management_1_1_local___map_a16e83ece0d2ecff380d377c260f82173}} 
\index{rgbd\_slam::map\_management::Local\_Map@{rgbd\_slam::map\_management::Local\_Map}!draw\_image\_head\_band@{draw\_image\_head\_band}}
\index{draw\_image\_head\_band@{draw\_image\_head\_band}!rgbd\_slam::map\_management::Local\_Map@{rgbd\_slam::map\_management::Local\_Map}}
\doxysubsubsection{\texorpdfstring{draw\_image\_head\_band()}{draw\_image\_head\_band()}}
{\footnotesize\ttfamily void rgbd\+\_\+slam\+::map\+\_\+management\+::\+Local\+\_\+\+Map\+::draw\+\_\+image\+\_\+head\+\_\+band (\begin{DoxyParamCaption}\item[{cv\+::\+Mat \&}]{debug\+Image }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [protected]}}



draw the top information band on the debug image 

PROTECTED \mbox{\Hypertarget{classrgbd__slam_1_1map__management_1_1_local___map_af34f0dc36c9e0e8c25fe5c22f4ef97c2}\label{classrgbd__slam_1_1map__management_1_1_local___map_af34f0dc36c9e0e8c25fe5c22f4ef97c2}} 
\index{rgbd\_slam::map\_management::Local\_Map@{rgbd\_slam::map\_management::Local\_Map}!find\_feature\_matches@{find\_feature\_matches}}
\index{find\_feature\_matches@{find\_feature\_matches}!rgbd\_slam::map\_management::Local\_Map@{rgbd\_slam::map\_management::Local\_Map}}
\doxysubsubsection{\texorpdfstring{find\_feature\_matches()}{find\_feature\_matches()}}
{\footnotesize\ttfamily \mbox{\hyperlink{structrgbd__slam_1_1matches__containers_1_1match_container}{matches\+\_\+containers\+::match\+Container}} rgbd\+\_\+slam\+::map\+\_\+management\+::\+Local\+\_\+\+Map\+::find\+\_\+feature\+\_\+matches (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classrgbd__slam_1_1utils_1_1_pose}{utils\+::\+Pose}} \&}]{current\+Pose,  }\item[{const \mbox{\hyperlink{classrgbd__slam_1_1features_1_1keypoints_1_1_keypoint___handler}{features\+::keypoints\+::\+Keypoint\+\_\+\+Handler}} \&}]{detected\+Keypoints\+Object,  }\item[{const \mbox{\hyperlink{namespacergbd__slam_1_1features_1_1primitives_ac85a148cd872917385ff3d0622c8162d}{features\+::primitives\+::plane\+\_\+container}} \&}]{detected\+Planes }\end{DoxyParamCaption})}



Find all matches for the given detected features. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em current\+Pose} & The pose of the observer \\
\hline
\mbox{\texttt{ in}}  & {\em detected\+Keypoints\+Object} & An object that contains the detected keypoints in the new input \\
\hline
\mbox{\texttt{ in}}  & {\em detected\+Planes} & An object that contains the detected planes in the new input \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classrgbd__slam_1_1map__management_1_1_local___map_a6a634da41117ea74edaa7bde12b1e55a}\label{classrgbd__slam_1_1map__management_1_1_local___map_a6a634da41117ea74edaa7bde12b1e55a}} 
\index{rgbd\_slam::map\_management::Local\_Map@{rgbd\_slam::map\_management::Local\_Map}!get\_debug\_image@{get\_debug\_image}}
\index{get\_debug\_image@{get\_debug\_image}!rgbd\_slam::map\_management::Local\_Map@{rgbd\_slam::map\_management::Local\_Map}}
\doxysubsubsection{\texorpdfstring{get\_debug\_image()}{get\_debug\_image()}}
{\footnotesize\ttfamily void rgbd\+\_\+slam\+::map\+\_\+management\+::\+Local\+\_\+\+Map\+::get\+\_\+debug\+\_\+image (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classrgbd__slam_1_1utils_1_1_pose}{utils\+::\+Pose}} \&}]{cam\+Pose,  }\item[{const bool}]{should\+Display\+Staged,  }\item[{const bool}]{should\+Display\+Plane\+Masks,  }\item[{cv\+::\+Mat \&}]{debug\+Image }\end{DoxyParamCaption}) const}



Compute a debug image to display the keypoints \& planes. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em cam\+Pose} & Pose of the camera in world coordinates \\
\hline
\mbox{\texttt{ in}}  & {\em should\+Display\+Staged} & If true, will also display the content of the staged keypoint map \\
\hline
\mbox{\texttt{ in}}  & {\em should\+Display\+Plane\+Masks} & If true, will also display the planes in local map \\
\hline
\mbox{\texttt{ in,out}}  & {\em debug\+Image} & Output image \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classrgbd__slam_1_1map__management_1_1_local___map_a50115cf37187dd54b7d1d0f66186883b}\label{classrgbd__slam_1_1map__management_1_1_local___map_a50115cf37187dd54b7d1d0f66186883b}} 
\index{rgbd\_slam::map\_management::Local\_Map@{rgbd\_slam::map\_management::Local\_Map}!get\_tracked\_keypoints\_features@{get\_tracked\_keypoints\_features}}
\index{get\_tracked\_keypoints\_features@{get\_tracked\_keypoints\_features}!rgbd\_slam::map\_management::Local\_Map@{rgbd\_slam::map\_management::Local\_Map}}
\doxysubsubsection{\texorpdfstring{get\_tracked\_keypoints\_features()}{get\_tracked\_keypoints\_features()}}
{\footnotesize\ttfamily const \mbox{\hyperlink{structrgbd__slam_1_1features_1_1keypoints_1_1_keypoints_with_id_struct}{features\+::keypoints\+::\+Keypoints\+With\+Id\+Struct}} rgbd\+\_\+slam\+::map\+\_\+management\+::\+Local\+\_\+\+Map\+::get\+\_\+tracked\+\_\+keypoints\+\_\+features (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classrgbd__slam_1_1utils_1_1_pose}{utils\+::\+Pose}} \&}]{lastpose }\end{DoxyParamCaption}) const}



Return an object containing the tracked keypoint features in screen space (2D), with the associated global ids. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em lastpose} & The last known pose of the observer \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classrgbd__slam_1_1map__management_1_1_local___map_ab29cc38e6616e7b37129f584539e20e7}\label{classrgbd__slam_1_1map__management_1_1_local___map_ab29cc38e6616e7b37129f584539e20e7}} 
\index{rgbd\_slam::map\_management::Local\_Map@{rgbd\_slam::map\_management::Local\_Map}!mark\_outliers\_as\_unmatched@{mark\_outliers\_as\_unmatched}}
\index{mark\_outliers\_as\_unmatched@{mark\_outliers\_as\_unmatched}!rgbd\_slam::map\_management::Local\_Map@{rgbd\_slam::map\_management::Local\_Map}}
\doxysubsubsection{\texorpdfstring{mark\_outliers\_as\_unmatched()}{mark\_outliers\_as\_unmatched()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void rgbd\+\_\+slam\+::map\+\_\+management\+::\+Local\+\_\+\+Map\+::mark\+\_\+outliers\+\_\+as\+\_\+unmatched (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{namespacergbd__slam_1_1matches__containers_a58801f59c64a14987579f745edbd3276}{matches\+\_\+containers\+::match\+\_\+plane\+\_\+container}} \&}]{outlier\+Matched\+Planes }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}



Mark all the outliers detected during optimization as unmatched. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em outlier\+Matched\+Planes} & A container of the wrong matches detected after the optimization process \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classrgbd__slam_1_1map__management_1_1_local___map_a6922aeab012e88206c07c2079eef442e}\label{classrgbd__slam_1_1map__management_1_1_local___map_a6922aeab012e88206c07c2079eef442e}} 
\index{rgbd\_slam::map\_management::Local\_Map@{rgbd\_slam::map\_management::Local\_Map}!mark\_outliers\_as\_unmatched@{mark\_outliers\_as\_unmatched}}
\index{mark\_outliers\_as\_unmatched@{mark\_outliers\_as\_unmatched}!rgbd\_slam::map\_management::Local\_Map@{rgbd\_slam::map\_management::Local\_Map}}
\doxysubsubsection{\texorpdfstring{mark\_outliers\_as\_unmatched()}{mark\_outliers\_as\_unmatched()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void rgbd\+\_\+slam\+::map\+\_\+management\+::\+Local\+\_\+\+Map\+::mark\+\_\+outliers\+\_\+as\+\_\+unmatched (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{namespacergbd__slam_1_1matches__containers_ab56afd18853a71d647cdd9564ac2ee73}{matches\+\_\+containers\+::match\+\_\+point\+\_\+container}} \&}]{outlier\+Matched\+Points }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}



Mark all the outliers detected during optimization as unmatched. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em outlier\+Matched\+Points} & A container of the wrong matches detected after the optimization process \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classrgbd__slam_1_1map__management_1_1_local___map_ad1073f3d16e8549024d939620831cc1e}\label{classrgbd__slam_1_1map__management_1_1_local___map_ad1073f3d16e8549024d939620831cc1e}} 
\index{rgbd\_slam::map\_management::Local\_Map@{rgbd\_slam::map\_management::Local\_Map}!reset@{reset}}
\index{reset@{reset}!rgbd\_slam::map\_management::Local\_Map@{rgbd\_slam::map\_management::Local\_Map}}
\doxysubsubsection{\texorpdfstring{reset()}{reset()}}
{\footnotesize\ttfamily void rgbd\+\_\+slam\+::map\+\_\+management\+::\+Local\+\_\+\+Map\+::reset (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Hard clean the local and staged map. 

\mbox{\Hypertarget{classrgbd__slam_1_1map__management_1_1_local___map_a9bfe08745c20ff961338a521cdc964d3}\label{classrgbd__slam_1_1map__management_1_1_local___map_a9bfe08745c20ff961338a521cdc964d3}} 
\index{rgbd\_slam::map\_management::Local\_Map@{rgbd\_slam::map\_management::Local\_Map}!update@{update}}
\index{update@{update}!rgbd\_slam::map\_management::Local\_Map@{rgbd\_slam::map\_management::Local\_Map}}
\doxysubsubsection{\texorpdfstring{update()}{update()}}
{\footnotesize\ttfamily void rgbd\+\_\+slam\+::map\+\_\+management\+::\+Local\+\_\+\+Map\+::update (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classrgbd__slam_1_1utils_1_1_pose}{utils\+::\+Pose}} \&}]{optimized\+Pose,  }\item[{const \mbox{\hyperlink{classrgbd__slam_1_1features_1_1keypoints_1_1_keypoint___handler}{features\+::keypoints\+::\+Keypoint\+\_\+\+Handler}} \&}]{keypoint\+Object,  }\item[{const \mbox{\hyperlink{namespacergbd__slam_1_1features_1_1primitives_ac85a148cd872917385ff3d0622c8162d}{features\+::primitives\+::plane\+\_\+container}} \&}]{detected\+Planes,  }\item[{const \mbox{\hyperlink{namespacergbd__slam_1_1matches__containers_ab56afd18853a71d647cdd9564ac2ee73}{matches\+\_\+containers\+::match\+\_\+point\+\_\+container}} \&}]{outlier\+Matched\+Points,  }\item[{const \mbox{\hyperlink{namespacergbd__slam_1_1matches__containers_a58801f59c64a14987579f745edbd3276}{matches\+\_\+containers\+::match\+\_\+plane\+\_\+container}} \&}]{outlier\+Matched\+Planes }\end{DoxyParamCaption})}



Update the local and global map. Add new points to staged and map container. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em optimized\+Pose} & The clean true pose of the observer, after optimization \\
\hline
\mbox{\texttt{ in}}  & {\em keypoint\+Object} & An object containing the detected key points in the rgbd frame. Must be the same as in find\+\_\+keypoint\+\_\+matches \\
\hline
\mbox{\texttt{ in}}  & {\em detected\+Planes} & A container for all detected planes in the depth image \\
\hline
\mbox{\texttt{ in}}  & {\em outlier\+Matched\+Points} & A container for all the wrongly associated points detected in the pose optimization process. They should be marked as invalid matches \\
\hline
\mbox{\texttt{ in}}  & {\em outlier\+Matched\+Planes} & A container for all the wrongly associated planes detected in the pose optimization process. They should be marked as invalid matches \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classrgbd__slam_1_1map__management_1_1_local___map_af62ebdf2d7be0eca02c759a8cc1ea602}\label{classrgbd__slam_1_1map__management_1_1_local___map_af62ebdf2d7be0eca02c759a8cc1ea602}} 
\index{rgbd\_slam::map\_management::Local\_Map@{rgbd\_slam::map\_management::Local\_Map}!update\_local\_to\_global@{update\_local\_to\_global}}
\index{update\_local\_to\_global@{update\_local\_to\_global}!rgbd\_slam::map\_management::Local\_Map@{rgbd\_slam::map\_management::Local\_Map}}
\doxysubsubsection{\texorpdfstring{update\_local\_to\_global()}{update\_local\_to\_global()}}
{\footnotesize\ttfamily void rgbd\+\_\+slam\+::map\+\_\+management\+::\+Local\+\_\+\+Map\+::update\+\_\+local\+\_\+to\+\_\+global (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}



Clean the local map so it stays local, and update the global map with the good features. 

\mbox{\Hypertarget{classrgbd__slam_1_1map__management_1_1_local___map_a561f96567193bf4de605a4406fac4732}\label{classrgbd__slam_1_1map__management_1_1_local___map_a561f96567193bf4de605a4406fac4732}} 
\index{rgbd\_slam::map\_management::Local\_Map@{rgbd\_slam::map\_management::Local\_Map}!update\_no\_pose@{update\_no\_pose}}
\index{update\_no\_pose@{update\_no\_pose}!rgbd\_slam::map\_management::Local\_Map@{rgbd\_slam::map\_management::Local\_Map}}
\doxysubsubsection{\texorpdfstring{update\_no\_pose()}{update\_no\_pose()}}
{\footnotesize\ttfamily void rgbd\+\_\+slam\+::map\+\_\+management\+::\+Local\+\_\+\+Map\+::update\+\_\+no\+\_\+pose (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Update the local map when no pose could be estimated. Consider all features as unmatched. 



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/home/baptisteh/\+Documents/code/robots/\+RGB\+\_\+\+SLAM/\+RGB-\/\+D-\/\+SLAM/src/map\+\_\+management/\mbox{\hyperlink{local__map_8hpp}{local\+\_\+map.\+hpp}}\item 
/home/baptisteh/\+Documents/code/robots/\+RGB\+\_\+\+SLAM/\+RGB-\/\+D-\/\+SLAM/src/map\+\_\+management/\mbox{\hyperlink{local__map_8cpp}{local\+\_\+map.\+cpp}}\end{DoxyCompactItemize}
