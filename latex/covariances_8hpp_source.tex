\doxysection{covariances.\+hpp}
\hypertarget{covariances_8hpp_source}{}\label{covariances_8hpp_source}\index{/home/baptisteh/Documents/code/robots/RGB\_SLAM/RGB-\/D-\/SLAM/src/utils/covariances.hpp@{/home/baptisteh/Documents/code/robots/RGB\_SLAM/RGB-\/D-\/SLAM/src/utils/covariances.hpp}}
\mbox{\hyperlink{covariances_8hpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#ifndef\ RGBDSLAM\_UTILS\_COVARIANCES\_HPP}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#define\ RGBDSLAM\_UTILS\_COVARIANCES\_HPP}}
\DoxyCodeLine{00003\ }
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{coordinates_8hpp}{coordinates.hpp}}"{}}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{logger_8hpp}{logger.hpp}}"{}}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{matches__containers_8hpp}{matches\_containers.hpp}}"{}}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pose_8hpp}{pose.hpp}}"{}}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{types_8hpp}{types.hpp}}"{}}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ <Eigen/src/Core/Matrix.h>}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ <algorithm>}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#include\ <bits/ranges\_algo.h>}}
\DoxyCodeLine{00012\ }
\DoxyCodeLine{00013\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacergbd__slam_1_1utils}{rgbd\_slam::utils}}\ \{}
\DoxyCodeLine{00014\ }
\DoxyCodeLine{00015\ \textcolor{keyword}{template}<\textcolor{keywordtype}{int}\ N>\ [[nodiscard]]\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{namespacergbd__slam_1_1utils_a9cbda3c897f333211ee9d67b329dcec5}{is\_covariance\_valid}}(\textcolor{keyword}{const}\ Eigen::Matrix<double,\ N,\ N>\&\ covariance)\ \textcolor{keyword}{noexcept}}
\DoxyCodeLine{00016\ \{}
\DoxyCodeLine{00017\ \ \ \ \ \textcolor{comment}{//\ covariance\ should\ be\ symetrical}}
\DoxyCodeLine{00018\ \ \ \ \ \textcolor{keywordflow}{if}\ (!covariance.isApprox(covariance.transpose()))}
\DoxyCodeLine{00019\ \ \ \ \ \{}
\DoxyCodeLine{00020\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacergbd__slam_1_1outputs_ab717e4badd78d57b03feca68cd4265c0}{outputs::log\_warning}}(\textcolor{stringliteral}{"{}Covariance\ is\ not\ symetrical"{}});}
\DoxyCodeLine{00021\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00022\ \ \ \ \ \}}
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00024\ \ \ \ \ \textcolor{comment}{//\ check\ that\ this\ covariance\ is\ positive\ semi\ definite}}
\DoxyCodeLine{00025\ \ \ \ \ Eigen::SelfAdjointEigenSolver<const\ Eigen::Matrix<double,\ N,\ N>>\ solver(covariance);}
\DoxyCodeLine{00026\ \ \ \ \ \textcolor{comment}{//\ any\ value\ <\ 0\ is\ an\ error}}
\DoxyCodeLine{00027\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}\ isPositiveSemiDefinite\ =\ not\ std::ranges::any\_of(solver.eigenvalues(),\ [](\textcolor{keywordtype}{double}\ value)\ \{}
\DoxyCodeLine{00028\ \ \ \ \ \ \ \ \ return\ value\ <\ 0;}
\DoxyCodeLine{00029\ \ \ \ \ \});}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00031\ \ \ \ \ \textcolor{keywordflow}{if}\ (not\ isPositiveSemiDefinite)}
\DoxyCodeLine{00032\ \ \ \ \ \{}
\DoxyCodeLine{00033\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacergbd__slam_1_1outputs_ab717e4badd78d57b03feca68cd4265c0}{outputs::log\_warning}}(\textcolor{stringliteral}{"{}Covariance\ is\ not\ positive\ semi\ definite"{}});}
\DoxyCodeLine{00034\ \ \ \ \ \}}
\DoxyCodeLine{00035\ \ \ \ \ \textcolor{keywordflow}{return}\ isPositiveSemiDefinite;}
\DoxyCodeLine{00036\ \}}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00043\ [[nodiscard]]\ \textcolor{keywordtype}{double}\ \mbox{\hyperlink{namespacergbd__slam_1_1utils_a034845c6434a68e6e6002f4f6277ab2c}{get\_depth\_quantization}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ depht)\ \textcolor{keyword}{noexcept};}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00051\ [[nodiscard]]\ \mbox{\hyperlink{structrgbd__slam_1_1_screen_coordinate_covariance}{ScreenCoordinateCovariance}}\ \mbox{\hyperlink{namespacergbd__slam_1_1utils_a1e7d30fceb1656c046225f4885da0a31}{get\_screen\_point\_covariance}}(}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ WorldCoordinate\&\ point,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structrgbd__slam_1_1_world_coordinate_covariance}{WorldCoordinateCovariance}}\&\ pointCovariance)\ \textcolor{keyword}{noexcept};}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00060\ [[nodiscard]]\ \mbox{\hyperlink{structrgbd__slam_1_1_screen_coordinate_covariance}{ScreenCoordinateCovariance}}\ \mbox{\hyperlink{namespacergbd__slam_1_1utils_a1e7d30fceb1656c046225f4885da0a31}{get\_screen\_point\_covariance}}(}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ CameraCoordinate\&\ point,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structrgbd__slam_1_1_camera_coordinate_covariance}{CameraCoordinateCovariance}}\&\ pointCovariance)\ \textcolor{keyword}{noexcept};}
\DoxyCodeLine{00062\ }
\DoxyCodeLine{00066\ [[nodiscard]]\ \mbox{\hyperlink{structrgbd__slam_1_1_world_coordinate_covariance}{WorldCoordinateCovariance}}\ \mbox{\hyperlink{namespacergbd__slam_1_1utils_aea0efe85d8571e80a7c8665704cb0d9e}{get\_world\_point\_covariance}}(}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structrgbd__slam_1_1_camera_coordinate_covariance}{CameraCoordinateCovariance}}\&\ cameraPointCovariance,}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structrgbd__slam_1_1_camera_to_world_matrix}{CameraToWorldMatrix}}\&\ cameraToWorld,}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespacergbd__slam_a668ec4e90f57f06678a0b85a12c38db3}{matrix33}}\&\ poseCovariance)\ \textcolor{keyword}{noexcept};}
\DoxyCodeLine{00073\ [[nodiscard]]\ \mbox{\hyperlink{structrgbd__slam_1_1_world_coordinate_covariance}{WorldCoordinateCovariance}}\ \mbox{\hyperlink{namespacergbd__slam_1_1utils_aea0efe85d8571e80a7c8665704cb0d9e}{get\_world\_point\_covariance}}(\textcolor{keyword}{const}\ ScreenCoordinate\&\ screenPoint,}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structrgbd__slam_1_1_camera_to_world_matrix}{CameraToWorldMatrix}}\&\ cameraToWorld,}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespacergbd__slam_a668ec4e90f57f06678a0b85a12c38db3}{matrix33}}\&\ poseCovariance)\ \textcolor{keyword}{noexcept};}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00083\ [[nodiscard]]\ \mbox{\hyperlink{structrgbd__slam_1_1_camera_coordinate_covariance}{CameraCoordinateCovariance}}\ \mbox{\hyperlink{namespacergbd__slam_1_1utils_a556ccbd966f58a0f76d9a53405072745}{get\_camera\_point\_covariance}}(\textcolor{keyword}{const}\ ScreenCoordinate\&\ screenPoint)\ \textcolor{keyword}{noexcept};}
\DoxyCodeLine{00084\ }
\DoxyCodeLine{00091\ [[nodiscard]]\ \mbox{\hyperlink{structrgbd__slam_1_1_camera_coordinate_covariance}{CameraCoordinateCovariance}}\ \mbox{\hyperlink{namespacergbd__slam_1_1utils_a556ccbd966f58a0f76d9a53405072745}{get\_camera\_point\_covariance}}(}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ ScreenCoordinate\&\ screenPoint,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structrgbd__slam_1_1_screen_coordinate_covariance}{ScreenCoordinateCovariance}}\&\ screenPointCovariance)\ \textcolor{keyword}{noexcept};}
\DoxyCodeLine{00093\ }
\DoxyCodeLine{00100\ [[nodiscard]]\ \mbox{\hyperlink{namespacergbd__slam_a70f681ee932c57b80130eb960ccf435f}{matrix44}}\ \mbox{\hyperlink{namespacergbd__slam_1_1utils_a3735cd614fe750dfe0dc7ade7346b158}{compute\_plane\_covariance}}(\textcolor{keyword}{const}\ PlaneCoordinates\&\ planeParameters,}
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespacergbd__slam_a668ec4e90f57f06678a0b85a12c38db3}{matrix33}}\&\ pointCloudCovariance);}
\DoxyCodeLine{00102\ [[nodiscard]]\ \mbox{\hyperlink{namespacergbd__slam_a668ec4e90f57f06678a0b85a12c38db3}{matrix33}}\ \mbox{\hyperlink{namespacergbd__slam_1_1utils_a071e281f17fe3f487e25e9cc9349a5a3}{compute\_reduced\_plane\_point\_cloud\_covariance}}(\textcolor{keyword}{const}\ PlaneCoordinates\&\ planeParameters,}
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespacergbd__slam_a70f681ee932c57b80130eb960ccf435f}{matrix44}}\&\ planeCloudCovariance);}
\DoxyCodeLine{00104\ }
\DoxyCodeLine{00114\ [[nodiscard]]\ \mbox{\hyperlink{namespacergbd__slam_a70f681ee932c57b80130eb960ccf435f}{matrix44}}\ \mbox{\hyperlink{namespacergbd__slam_1_1utils_adb9b794ab09890567eb981adabe2b566}{get\_world\_plane\_covariance}}(\textcolor{keyword}{const}\ PlaneCameraCoordinates\&\ planeCoordinates,}
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structrgbd__slam_1_1_camera_to_world_matrix}{CameraToWorldMatrix}}\&\ cameraToWorldMatrix,}
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structrgbd__slam_1_1_plane_camera_to_world_matrix}{PlaneCameraToWorldMatrix}}\&\ planeCameraToWorldMatrix,}
\DoxyCodeLine{00117\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespacergbd__slam_a70f681ee932c57b80130eb960ccf435f}{matrix44}}\&\ planeCovariance,}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespacergbd__slam_a668ec4e90f57f06678a0b85a12c38db3}{matrix33}}\&\ worldPoseCovariance);}
\DoxyCodeLine{00119\ }
\DoxyCodeLine{00120\ \}\ \textcolor{comment}{//\ namespace\ rgbd\_slam::utils}}
\DoxyCodeLine{00121\ }
\DoxyCodeLine{00122\ \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
