\hypertarget{_levenberg_marquard_functors_8hpp_source}{}\doxysection{Levenberg\+Marquard\+Functors.\+hpp}
\label{_levenberg_marquard_functors_8hpp_source}\index{/home/baptou/Documents/code/robots/RGB\_SLAM/RGB-\/D-\/SLAM/src/pose\_optimization/LevenbergMarquardFunctors.hpp@{/home/baptou/Documents/code/robots/RGB\_SLAM/RGB-\/D-\/SLAM/src/pose\_optimization/LevenbergMarquardFunctors.hpp}}
\mbox{\hyperlink{_levenberg_marquard_functors_8hpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#ifndef RGBDSLAM\_POSEOPTIMIZATION\_LMFUNCTORS\_HPP}}
\DoxyCodeLine{2 \textcolor{preprocessor}{\#define RGBDSLAM\_POSEOPTIMIZATION\_LMFUNCTORS\_HPP}}
\DoxyCodeLine{3 }
\DoxyCodeLine{4 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{types_8hpp}{types.hpp}}"{}}}
\DoxyCodeLine{5 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{matches__containers_8hpp}{matches\_containers.hpp}}"{}}}
\DoxyCodeLine{6 }
\DoxyCodeLine{7 \textcolor{comment}{// types}}
\DoxyCodeLine{8 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{map__point_8hpp}{map\_point.hpp}}"{}}}
\DoxyCodeLine{9 }
\DoxyCodeLine{10 \textcolor{preprocessor}{\#include <Eigen/Eigen>}}
\DoxyCodeLine{11 \textcolor{preprocessor}{\#include <unsupported/Eigen/NonLinearOptimization>}}
\DoxyCodeLine{12 }
\DoxyCodeLine{13 \textcolor{preprocessor}{\#include <iostream>}}
\DoxyCodeLine{14 }
\DoxyCodeLine{15 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespacergbd__slam}{rgbd\_slam}} \{}
\DoxyCodeLine{16     \textcolor{keyword}{namespace }pose\_optimization \{}
\DoxyCodeLine{17 }
\DoxyCodeLine{22         \textcolor{keyword}{template}<\textcolor{keyword}{typename} \_Scalar, \textcolor{keywordtype}{int} NX = Eigen::Dynamic, \textcolor{keywordtype}{int} NY = Eigen::Dynamic>}
\DoxyCodeLine{23             \textcolor{keyword}{struct }\mbox{\hyperlink{structrgbd__slam_1_1pose__optimization_1_1_levenberg___marquardt___functor}{Levenberg\_Marquardt\_Functor}} }
\DoxyCodeLine{24             \{}
\DoxyCodeLine{25 }
\DoxyCodeLine{26                 \textcolor{comment}{//tell the called the numerical type and input/ouput size}}
\DoxyCodeLine{27                 \textcolor{keyword}{typedef} \_Scalar \mbox{\hyperlink{structrgbd__slam_1_1pose__optimization_1_1_levenberg___marquardt___functor_ac17e7c1e7b79a465b35470493424a0a7}{Scalar}};}
\DoxyCodeLine{28                 \textcolor{keyword}{enum} \{}
\DoxyCodeLine{29                     \mbox{\hyperlink{structrgbd__slam_1_1pose__optimization_1_1_levenberg___marquardt___functor_a57fd7781446e7e2a922b8f787beb907fa934a64e8c19364010a4f60b41230effa}{InputsAtCompileTime}} = NX,}
\DoxyCodeLine{30                     \mbox{\hyperlink{structrgbd__slam_1_1pose__optimization_1_1_levenberg___marquardt___functor_a57fd7781446e7e2a922b8f787beb907fa174d6ee09a4be818644994b27ac40733}{ValuesAtCompileTime}} = NY}
\DoxyCodeLine{31                 \};}
\DoxyCodeLine{32 }
\DoxyCodeLine{33                 \textcolor{comment}{// typedefs for the original functor}}
\DoxyCodeLine{34                 \textcolor{keyword}{typedef} Eigen::Matrix<Scalar, InputsAtCompileTime, 1> \mbox{\hyperlink{structrgbd__slam_1_1pose__optimization_1_1_levenberg___marquardt___functor_a10beb8913f4937bc0c3de4e7eb048124}{InputType}};}
\DoxyCodeLine{35                 \textcolor{keyword}{typedef} Eigen::Matrix<Scalar, ValuesAtCompileTime, 1> \mbox{\hyperlink{structrgbd__slam_1_1pose__optimization_1_1_levenberg___marquardt___functor_a76469098b16581f5e74bf4d29066ce36}{ValueType}};}
\DoxyCodeLine{36                 \textcolor{keyword}{typedef} Eigen::Matrix<Scalar, ValuesAtCompileTime, InputsAtCompileTime> \mbox{\hyperlink{structrgbd__slam_1_1pose__optimization_1_1_levenberg___marquardt___functor_aa3fc6a4805e1f47ce21048d8f19db1b8}{JacobianType}};}
\DoxyCodeLine{37 }
\DoxyCodeLine{38                 \mbox{\hyperlink{structrgbd__slam_1_1pose__optimization_1_1_levenberg___marquardt___functor_af4f370c6c3ccf4cc97fcfe53f83323ca}{Levenberg\_Marquardt\_Functor}}(\textcolor{keyword}{const} uint inputCount, \textcolor{keyword}{const} uint outputCount) :}
\DoxyCodeLine{39                     \mbox{\hyperlink{structrgbd__slam_1_1pose__optimization_1_1_levenberg___marquardt___functor_a4be71ac6813d8b7c5f0e59443426c9ff}{\_M}}(inputCount), \mbox{\hyperlink{structrgbd__slam_1_1pose__optimization_1_1_levenberg___marquardt___functor_acea4704692b5e4bc3cb7dd0c5b5a0577}{\_N}}(outputCount)}
\DoxyCodeLine{40                 \{}
\DoxyCodeLine{41                 \}}
\DoxyCodeLine{42 }
\DoxyCodeLine{43                 uint \mbox{\hyperlink{structrgbd__slam_1_1pose__optimization_1_1_levenberg___marquardt___functor_abb503ea719d2b2c9792bed7f271e5418}{values}}()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{44                     \textcolor{keywordflow}{return} \mbox{\hyperlink{structrgbd__slam_1_1pose__optimization_1_1_levenberg___marquardt___functor_acea4704692b5e4bc3cb7dd0c5b5a0577}{\_N}};}
\DoxyCodeLine{45                 \}}
\DoxyCodeLine{46                 uint \mbox{\hyperlink{structrgbd__slam_1_1pose__optimization_1_1_levenberg___marquardt___functor_a63d94e30ab19e862fad26f9c55e0ca51}{inputs}}()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{47                     \textcolor{keywordflow}{return} \mbox{\hyperlink{structrgbd__slam_1_1pose__optimization_1_1_levenberg___marquardt___functor_a4be71ac6813d8b7c5f0e59443426c9ff}{\_M}};}
\DoxyCodeLine{48                 \}}
\DoxyCodeLine{49 }
\DoxyCodeLine{50                 uint \mbox{\hyperlink{structrgbd__slam_1_1pose__optimization_1_1_levenberg___marquardt___functor_a4be71ac6813d8b7c5f0e59443426c9ff}{\_M}};}
\DoxyCodeLine{51                 uint \mbox{\hyperlink{structrgbd__slam_1_1pose__optimization_1_1_levenberg___marquardt___functor_acea4704692b5e4bc3cb7dd0c5b5a0577}{\_N}};}
\DoxyCodeLine{52             \};}
\DoxyCodeLine{53 }
\DoxyCodeLine{54 }
\DoxyCodeLine{58         \mbox{\hyperlink{namespacergbd__slam_a1c642e1c4dfceaa8c7409331bfc10b6b}{vector3}} \mbox{\hyperlink{namespacergbd__slam_1_1pose__optimization_a5631cae47389e44a75b184bf60db8201}{get\_scaled\_axis\_coefficients\_from\_quaternion}}(\textcolor{keyword}{const} \mbox{\hyperlink{namespacergbd__slam_a078420ee4217ebf095ba100570679827}{quaternion}}\& quat);}
\DoxyCodeLine{59 }
\DoxyCodeLine{63         \mbox{\hyperlink{namespacergbd__slam_a078420ee4217ebf095ba100570679827}{quaternion}} \mbox{\hyperlink{namespacergbd__slam_1_1pose__optimization_aeee6808d772dc72ceac7fd61a3564eca}{get\_quaternion\_from\_scale\_axis\_coefficients}}(\textcolor{keyword}{const} \mbox{\hyperlink{namespacergbd__slam_a1c642e1c4dfceaa8c7409331bfc10b6b}{vector3}} optimizationCoefficients);}
\DoxyCodeLine{64 }
\DoxyCodeLine{65 }
\DoxyCodeLine{66         \mbox{\hyperlink{namespacergbd__slam_a078420ee4217ebf095ba100570679827}{quaternion}} \mbox{\hyperlink{namespacergbd__slam_1_1pose__optimization_a60b66cfa4c51c64babcb5ad9b259c1ba}{get\_quaternion\_exponential}}(\textcolor{keyword}{const} \mbox{\hyperlink{namespacergbd__slam_a078420ee4217ebf095ba100570679827}{quaternion}}\& quat);}
\DoxyCodeLine{67         \mbox{\hyperlink{namespacergbd__slam_a078420ee4217ebf095ba100570679827}{quaternion}} \mbox{\hyperlink{namespacergbd__slam_1_1pose__optimization_ae2acb81b214e548bffd58f4ebf90d2f5}{get\_quaternion\_logarithm}}(\textcolor{keyword}{const} \mbox{\hyperlink{namespacergbd__slam_a078420ee4217ebf095ba100570679827}{quaternion}}\& quat);}
\DoxyCodeLine{68 }
\DoxyCodeLine{69 }
\DoxyCodeLine{70 }
\DoxyCodeLine{74         \textcolor{keyword}{struct }\mbox{\hyperlink{structrgbd__slam_1_1pose__optimization_1_1_global___pose___estimator}{Global\_Pose\_Estimator}} :}
\DoxyCodeLine{75             \mbox{\hyperlink{structrgbd__slam_1_1pose__optimization_1_1_levenberg___marquardt___functor}{Levenberg\_Marquardt\_Functor}}<double>}
\DoxyCodeLine{76         \{}
\DoxyCodeLine{77             \textcolor{comment}{// Simple constructor}}
\DoxyCodeLine{84 \textcolor{comment}{}            \mbox{\hyperlink{structrgbd__slam_1_1pose__optimization_1_1_global___pose___estimator_a1fcc96ee2aeb8832ffbf9c2187890622}{Global\_Pose\_Estimator}}(\textcolor{keyword}{const} \textcolor{keywordtype}{size\_t} n, \textcolor{keyword}{const} \mbox{\hyperlink{namespacergbd__slam_1_1matches__containers_aac0b5a78c14f75d31fe7bcc15d377b9c}{matches\_containers::match\_point\_container}}\& points, \textcolor{keyword}{const} \mbox{\hyperlink{namespacergbd__slam_a1c642e1c4dfceaa8c7409331bfc10b6b}{vector3}}\& worldPosition, \textcolor{keyword}{const} \mbox{\hyperlink{namespacergbd__slam_a078420ee4217ebf095ba100570679827}{quaternion}}\& worldRotation);}
\DoxyCodeLine{85 }
\DoxyCodeLine{95             \textcolor{keywordtype}{double} \mbox{\hyperlink{structrgbd__slam_1_1pose__optimization_1_1_global___pose___estimator_ae1fcc3abd892876c4631afe43e7b79dc}{get\_2D\_to\_3D\_distance}}(\textcolor{keyword}{const} \mbox{\hyperlink{namespacergbd__slam_a1c642e1c4dfceaa8c7409331bfc10b6b}{vector3}}\& mapPoint, \textcolor{keyword}{const} \mbox{\hyperlink{namespacergbd__slam_a1c642e1c4dfceaa8c7409331bfc10b6b}{vector3}}\& matchedPoint, \textcolor{keyword}{const} \mbox{\hyperlink{namespacergbd__slam_ae454c342bc3dc5ead4e6c1df65e3fd84}{matrix34}}\& worldToCamMatrix) \textcolor{keyword}{const};}
\DoxyCodeLine{96 }
\DoxyCodeLine{106             \textcolor{keywordtype}{double} \mbox{\hyperlink{structrgbd__slam_1_1pose__optimization_1_1_global___pose___estimator_aca0d41f87de3d465768caf5b8815a28f}{get\_3D\_to\_3D\_distance}}(\textcolor{keyword}{const} \mbox{\hyperlink{namespacergbd__slam_a1c642e1c4dfceaa8c7409331bfc10b6b}{vector3}}\& mapPoint, \textcolor{keyword}{const} \mbox{\hyperlink{namespacergbd__slam_a1c642e1c4dfceaa8c7409331bfc10b6b}{vector3}}\& matchedPoint, \textcolor{keyword}{const} \mbox{\hyperlink{namespacergbd__slam_ae454c342bc3dc5ead4e6c1df65e3fd84}{matrix34}}\& camToWorldMatrix) \textcolor{keyword}{const};}
\DoxyCodeLine{107 }
\DoxyCodeLine{114             \textcolor{keywordtype}{int} \mbox{\hyperlink{structrgbd__slam_1_1pose__optimization_1_1_global___pose___estimator_a1413e702e0a1c579b72e20a2901d0679}{operator()}}(\textcolor{keyword}{const} Eigen::VectorXd\& x, Eigen::VectorXd\& fvec) \textcolor{keyword}{const};}
\DoxyCodeLine{115 }
\DoxyCodeLine{116             \textcolor{keyword}{private}:}
\DoxyCodeLine{117             \textcolor{keyword}{const} \mbox{\hyperlink{namespacergbd__slam_1_1matches__containers_aac0b5a78c14f75d31fe7bcc15d377b9c}{matches\_containers::match\_point\_container}}\& \_points; }
\DoxyCodeLine{118             \textcolor{keyword}{const} \mbox{\hyperlink{namespacergbd__slam_a078420ee4217ebf095ba100570679827}{quaternion}} \_rotation;}
\DoxyCodeLine{119             \textcolor{keyword}{const} \mbox{\hyperlink{namespacergbd__slam_a1c642e1c4dfceaa8c7409331bfc10b6b}{vector3}} \_position;}
\DoxyCodeLine{120             }
\DoxyCodeLine{121             \textcolor{comment}{// Error function parameters}}
\DoxyCodeLine{122             \textcolor{keyword}{const} \textcolor{keywordtype}{double} \_pointErrorMultiplier;}
\DoxyCodeLine{123             \textcolor{keyword}{const} \textcolor{keywordtype}{double} \_lossScale;}
\DoxyCodeLine{124             \textcolor{keyword}{const} \textcolor{keywordtype}{double} \_lossAlpha;}
\DoxyCodeLine{125         \};}
\DoxyCodeLine{126 }
\DoxyCodeLine{127         \textcolor{keyword}{struct }\mbox{\hyperlink{structrgbd__slam_1_1pose__optimization_1_1_global___pose___functor}{Global\_Pose\_Functor}} : Eigen::NumericalDiff<Global\_Pose\_Estimator> \{\};}
\DoxyCodeLine{128 }
\DoxyCodeLine{129 }
\DoxyCodeLine{134         \textcolor{keyword}{const} std::string \mbox{\hyperlink{namespacergbd__slam_1_1pose__optimization_ac7a23970392763710a2096a10bbdb68a}{get\_human\_readable\_end\_message}}(Eigen::LevenbergMarquardtSpace::Status status);}
\DoxyCodeLine{135 }
\DoxyCodeLine{136     \}       \textcolor{comment}{/* pose\_optimization*/}}
\DoxyCodeLine{137 \}   \textcolor{comment}{/* rgbd\_slam */}}
\DoxyCodeLine{138 }
\DoxyCodeLine{139 \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
