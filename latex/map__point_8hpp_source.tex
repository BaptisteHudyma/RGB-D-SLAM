\hypertarget{map__point_8hpp_source}{}\doxysection{map\+\_\+point.\+hpp}
\label{map__point_8hpp_source}\index{/home/baptou/Documents/code/robots/RGB\_SLAM/RGB-\/D-\/SLAM/src/map\_management/map\_point.hpp@{/home/baptou/Documents/code/robots/RGB\_SLAM/RGB-\/D-\/SLAM/src/map\_management/map\_point.hpp}}
\mbox{\hyperlink{map__point_8hpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#ifndef RGBDSLAM\_MAPMANAGEMENT\_MAPPOINT\_HPP}}
\DoxyCodeLine{2 \textcolor{preprocessor}{\#define RGBDSLAM\_MAPMANAGEMENT\_MAPPOINT\_HPP}}
\DoxyCodeLine{3 }
\DoxyCodeLine{4 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{types_8hpp}{types.hpp}}"{}}}
\DoxyCodeLine{5 }
\DoxyCodeLine{6 \textcolor{preprocessor}{\#include <opencv2/opencv.hpp>}}
\DoxyCodeLine{7 }
\DoxyCodeLine{8 }
\DoxyCodeLine{9 }
\DoxyCodeLine{10 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespacergbd__slam}{rgbd\_slam}} \{}
\DoxyCodeLine{11     \textcolor{keyword}{namespace }map\_management \{}
\DoxyCodeLine{12 }
\DoxyCodeLine{13         \textcolor{keyword}{const} \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{namespacergbd__slam_1_1map__management_ad715b0460102980c8d6fcaa81b1107d3}{INVALID\_POINT\_UNIQ\_ID}} = 0; \textcolor{comment}{// This id indicates an invalid unique id for a map point}}
\DoxyCodeLine{14         \textcolor{keyword}{const} \textcolor{keywordtype}{int} \mbox{\hyperlink{namespacergbd__slam_1_1map__management_ac4b9445dc894687f9645da2c1d7fb3df}{UNMATCHED\_POINT\_INDEX}} = -\/1;      \textcolor{comment}{// Id of a unmatched point}}
\DoxyCodeLine{15 }
\DoxyCodeLine{19         \textcolor{keyword}{struct }\mbox{\hyperlink{structrgbd__slam_1_1map__management_1_1_point}{Point}} }
\DoxyCodeLine{20         \{}
\DoxyCodeLine{21             \textcolor{comment}{// world coordinates}}
\DoxyCodeLine{22             \mbox{\hyperlink{namespacergbd__slam_a1c642e1c4dfceaa8c7409331bfc10b6b}{vector3}} \mbox{\hyperlink{structrgbd__slam_1_1map__management_1_1_point_ac2682cd3df4a66c4a25c4275c8acab54}{\_coordinates}};}
\DoxyCodeLine{23             \mbox{\hyperlink{namespacergbd__slam_a1c642e1c4dfceaa8c7409331bfc10b6b}{vector3}} \mbox{\hyperlink{structrgbd__slam_1_1map__management_1_1_point_a1d97d16831938a05e87b1191a7eb92ba}{\_screenCoordinates}};}
\DoxyCodeLine{24 }
\DoxyCodeLine{25             \textcolor{comment}{// 3D descriptor (SURF)}}
\DoxyCodeLine{26             cv::Mat \mbox{\hyperlink{structrgbd__slam_1_1map__management_1_1_point_acb78f641c06c5c7ad59b03bc4cebed47}{\_descriptor}};}
\DoxyCodeLine{27 }
\DoxyCodeLine{28             \textcolor{comment}{// unique identifier, to match this point without using descriptors}}
\DoxyCodeLine{29             \textcolor{keyword}{const} \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{structrgbd__slam_1_1map__management_1_1_point_a46b70bcf21a3209e077989ca4559d8e8}{\_id}};}
\DoxyCodeLine{30 }
\DoxyCodeLine{31             \textcolor{keyword}{protected}:}
\DoxyCodeLine{32             \mbox{\hyperlink{structrgbd__slam_1_1map__management_1_1_point_ad10397c518c35773877ede14306f1a7e}{Point}} (\textcolor{keyword}{const} \mbox{\hyperlink{namespacergbd__slam_a1c642e1c4dfceaa8c7409331bfc10b6b}{vector3}}\& coordinates, \textcolor{keyword}{const} cv::Mat\& descriptor);}
\DoxyCodeLine{33             \textcolor{comment}{// copy constructor}}
\DoxyCodeLine{34             \mbox{\hyperlink{structrgbd__slam_1_1map__management_1_1_point_ad10397c518c35773877ede14306f1a7e}{Point}} (\textcolor{keyword}{const} \mbox{\hyperlink{namespacergbd__slam_a1c642e1c4dfceaa8c7409331bfc10b6b}{vector3}}\& coordinates, \textcolor{keyword}{const} cv::Mat\& descriptor, \textcolor{keyword}{const} \textcolor{keywordtype}{size\_t} \textcolor{keywordtype}{id});}
\DoxyCodeLine{35 }
\DoxyCodeLine{36             \textcolor{keyword}{inline} \textcolor{keyword}{static} \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{structrgbd__slam_1_1map__management_1_1_point_a2ae8c3099aa67ce9925cc448c8cbfa56}{\_currentPointId}} = 1;   \textcolor{comment}{// 0 is invalid}}
\DoxyCodeLine{37         \};}
\DoxyCodeLine{38 }
\DoxyCodeLine{42         \textcolor{keyword}{struct }\mbox{\hyperlink{structrgbd__slam_1_1map__management_1_1_i_map___point___with___tracking}{IMap\_Point\_With\_Tracking}}}
\DoxyCodeLine{43             : \textcolor{keyword}{public} \mbox{\hyperlink{structrgbd__slam_1_1map__management_1_1_point}{Point}}}
\DoxyCodeLine{44         \{}
\DoxyCodeLine{45             \mbox{\hyperlink{structrgbd__slam_1_1map__management_1_1_i_map___point___with___tracking_a8b24c884f80d428db51752fc740eace7}{IMap\_Point\_With\_Tracking}}(\textcolor{keyword}{const} \mbox{\hyperlink{namespacergbd__slam_a1c642e1c4dfceaa8c7409331bfc10b6b}{vector3}}\& coordinates, \textcolor{keyword}{const} \mbox{\hyperlink{namespacergbd__slam_a2877fc3a278a20d5132bcd38e12faf69}{matrix33}}\& covariance, \textcolor{keyword}{const} cv::Mat\& descriptor);}
\DoxyCodeLine{46             \mbox{\hyperlink{structrgbd__slam_1_1map__management_1_1_i_map___point___with___tracking_a8b24c884f80d428db51752fc740eace7}{IMap\_Point\_With\_Tracking}}(\textcolor{keyword}{const} \mbox{\hyperlink{namespacergbd__slam_a1c642e1c4dfceaa8c7409331bfc10b6b}{vector3}}\& coordinates, \textcolor{keyword}{const} \mbox{\hyperlink{namespacergbd__slam_a2877fc3a278a20d5132bcd38e12faf69}{matrix33}}\& covariance, \textcolor{keyword}{const} cv::Mat\& descriptor, \textcolor{keyword}{const} \textcolor{keywordtype}{size\_t} \textcolor{keywordtype}{id});}
\DoxyCodeLine{50             \textcolor{keyword}{virtual} \textcolor{keywordtype}{double} \mbox{\hyperlink{structrgbd__slam_1_1map__management_1_1_i_map___point___with___tracking_a858f10fd0a6661b1d434e82dfa1f6d68}{get\_confidence}}() \textcolor{keyword}{const} =  0;}
\DoxyCodeLine{51 }
\DoxyCodeLine{55             \textcolor{keyword}{virtual} \textcolor{keywordtype}{double} \mbox{\hyperlink{structrgbd__slam_1_1map__management_1_1_i_map___point___with___tracking_a6dac46e7bd635ca1c3f2f9798feb73c7}{update\_matched}}(\textcolor{keyword}{const} \mbox{\hyperlink{namespacergbd__slam_a1c642e1c4dfceaa8c7409331bfc10b6b}{vector3}}\& newPointCoordinates, \textcolor{keyword}{const} \mbox{\hyperlink{namespacergbd__slam_a2877fc3a278a20d5132bcd38e12faf69}{matrix33}}\& covariance) = 0;}
\DoxyCodeLine{56 }
\DoxyCodeLine{60             \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \mbox{\hyperlink{structrgbd__slam_1_1map__management_1_1_i_map___point___with___tracking_aa2627b0500cbeff88570ad7017153465}{update\_unmatched}}(\textcolor{keywordtype}{int} removeNMatches = 1) = 0;}
\DoxyCodeLine{61 }
\DoxyCodeLine{62             \textcolor{keyword}{const} \mbox{\hyperlink{namespacergbd__slam_a2877fc3a278a20d5132bcd38e12faf69}{matrix33}} \mbox{\hyperlink{structrgbd__slam_1_1map__management_1_1_i_map___point___with___tracking_a114df6422d2b509705c729b3b779049d}{get\_covariance\_matrix}}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} \_covariance; \};}
\DoxyCodeLine{63 }
\DoxyCodeLine{64             \textcolor{keywordtype}{int} \mbox{\hyperlink{structrgbd__slam_1_1map__management_1_1_i_map___point___with___tracking_aa81f3998f97f5d86a34570722204e909}{\_lastMatchedIndex}};}
\DoxyCodeLine{65 }
\DoxyCodeLine{66             \textcolor{keyword}{protected}:}
\DoxyCodeLine{67             }
\DoxyCodeLine{72             \textcolor{keywordtype}{double} \mbox{\hyperlink{structrgbd__slam_1_1map__management_1_1_i_map___point___with___tracking_acb0b13b394f349fbc9695dd92affc738}{track\_point}}(\textcolor{keyword}{const} \mbox{\hyperlink{namespacergbd__slam_a1c642e1c4dfceaa8c7409331bfc10b6b}{vector3}}\& newPointCoordinates, \textcolor{keyword}{const} \mbox{\hyperlink{namespacergbd__slam_a2877fc3a278a20d5132bcd38e12faf69}{matrix33}}\& newPointCovariance);}
\DoxyCodeLine{73 }
\DoxyCodeLine{74             \textcolor{keyword}{private}:}
\DoxyCodeLine{75             \textcolor{comment}{// covariance matrix}}
\DoxyCodeLine{76            \mbox{\hyperlink{namespacergbd__slam_a2877fc3a278a20d5132bcd38e12faf69}{matrix33}} \_covariance; }
\DoxyCodeLine{77         \};}
\DoxyCodeLine{78 }
\DoxyCodeLine{82         \textcolor{keyword}{class }\mbox{\hyperlink{classrgbd__slam_1_1map__management_1_1_staged___point}{Staged\_Point}}}
\DoxyCodeLine{83             : \textcolor{keyword}{public} \mbox{\hyperlink{structrgbd__slam_1_1map__management_1_1_i_map___point___with___tracking}{IMap\_Point\_With\_Tracking}}}
\DoxyCodeLine{84         \{}
\DoxyCodeLine{85             \textcolor{keyword}{public}:}
\DoxyCodeLine{86                 \mbox{\hyperlink{classrgbd__slam_1_1map__management_1_1_staged___point_a4d8bf6f24d6fe4842d57895fea31ede5}{Staged\_Point}}(\textcolor{keyword}{const} \mbox{\hyperlink{namespacergbd__slam_a1c642e1c4dfceaa8c7409331bfc10b6b}{vector3}}\& coordinates, \textcolor{keyword}{const} \mbox{\hyperlink{namespacergbd__slam_a2877fc3a278a20d5132bcd38e12faf69}{matrix33}}\& covariance, \textcolor{keyword}{const} cv::Mat\& descriptor);}
\DoxyCodeLine{87                 \mbox{\hyperlink{classrgbd__slam_1_1map__management_1_1_staged___point_a4d8bf6f24d6fe4842d57895fea31ede5}{Staged\_Point}}(\textcolor{keyword}{const} \mbox{\hyperlink{namespacergbd__slam_a1c642e1c4dfceaa8c7409331bfc10b6b}{vector3}}\& coordinates, \textcolor{keyword}{const} \mbox{\hyperlink{namespacergbd__slam_a2877fc3a278a20d5132bcd38e12faf69}{matrix33}}\& covariance, \textcolor{keyword}{const} cv::Mat\& descriptor, \textcolor{keyword}{const} \textcolor{keywordtype}{size\_t} \textcolor{keywordtype}{id});}
\DoxyCodeLine{88 }
\DoxyCodeLine{89                 \textcolor{comment}{// Count the number of times his points was matched}}
\DoxyCodeLine{90                 \textcolor{keywordtype}{int} \mbox{\hyperlink{classrgbd__slam_1_1map__management_1_1_staged___point_a9aa1cf59de6f2b9e222ed5f5a407bd56}{\_matchesCount}};}
\DoxyCodeLine{91 }
\DoxyCodeLine{95                 \textcolor{keywordtype}{bool} \mbox{\hyperlink{classrgbd__slam_1_1map__management_1_1_staged___point_a86d7b31ec5f8aedfb1275c56845fe1f7}{should\_add\_to\_local\_map}}() \textcolor{keyword}{const};}
\DoxyCodeLine{96 }
\DoxyCodeLine{100                 \textcolor{keywordtype}{bool} \mbox{\hyperlink{classrgbd__slam_1_1map__management_1_1_staged___point_a57f337308d77237a6f49e67268705e7d}{should\_remove\_from\_staged}}() \textcolor{keyword}{const};}
\DoxyCodeLine{101 }
\DoxyCodeLine{105                 \textcolor{keywordtype}{void} \mbox{\hyperlink{classrgbd__slam_1_1map__management_1_1_staged___point_ac9b2b8aed6f7cb409b8baf6afd48d875}{update\_unmatched}}(\textcolor{keywordtype}{int} removeNMatches = 1) \textcolor{keyword}{override};}
\DoxyCodeLine{106 }
\DoxyCodeLine{110                 \textcolor{keywordtype}{double} \mbox{\hyperlink{classrgbd__slam_1_1map__management_1_1_staged___point_a6c21ed525c2f98bc47f98ce704f62cb7}{update\_matched}}(\textcolor{keyword}{const} \mbox{\hyperlink{namespacergbd__slam_a1c642e1c4dfceaa8c7409331bfc10b6b}{vector3}}\& newPointCoordinates, \textcolor{keyword}{const} \mbox{\hyperlink{namespacergbd__slam_a2877fc3a278a20d5132bcd38e12faf69}{matrix33}}\& covariance) \textcolor{keyword}{override};}
\DoxyCodeLine{111 }
\DoxyCodeLine{112             \textcolor{keyword}{private}:}
\DoxyCodeLine{116                 \textcolor{keywordtype}{double} get\_confidence() \textcolor{keyword}{const override};}
\DoxyCodeLine{117         \};}
\DoxyCodeLine{118 }
\DoxyCodeLine{119 }
\DoxyCodeLine{123         \textcolor{keyword}{class }\mbox{\hyperlink{classrgbd__slam_1_1map__management_1_1_map___point}{Map\_Point}} }
\DoxyCodeLine{124             : \textcolor{keyword}{public} \mbox{\hyperlink{structrgbd__slam_1_1map__management_1_1_i_map___point___with___tracking}{IMap\_Point\_With\_Tracking}} }
\DoxyCodeLine{125         \{}
\DoxyCodeLine{126 }
\DoxyCodeLine{127             \textcolor{keyword}{public}:}
\DoxyCodeLine{128                 \mbox{\hyperlink{classrgbd__slam_1_1map__management_1_1_map___point_a4b28a516e3b8419ac4177a184291c0a6}{Map\_Point}}(\textcolor{keyword}{const} \mbox{\hyperlink{namespacergbd__slam_a1c642e1c4dfceaa8c7409331bfc10b6b}{vector3}}\& coordinates, \textcolor{keyword}{const} \mbox{\hyperlink{namespacergbd__slam_a2877fc3a278a20d5132bcd38e12faf69}{matrix33}}\& covariance, \textcolor{keyword}{const} cv::Mat\& descriptor);}
\DoxyCodeLine{129                 \mbox{\hyperlink{classrgbd__slam_1_1map__management_1_1_map___point_a4b28a516e3b8419ac4177a184291c0a6}{Map\_Point}}(\textcolor{keyword}{const} \mbox{\hyperlink{namespacergbd__slam_a1c642e1c4dfceaa8c7409331bfc10b6b}{vector3}}\& coordinates, \textcolor{keyword}{const} \mbox{\hyperlink{namespacergbd__slam_a2877fc3a278a20d5132bcd38e12faf69}{matrix33}}\& covariance, \textcolor{keyword}{const} cv::Mat\& descriptor, \textcolor{keyword}{const} \textcolor{keywordtype}{size\_t} \textcolor{keywordtype}{id});}
\DoxyCodeLine{130 }
\DoxyCodeLine{131 }
\DoxyCodeLine{135                 \textcolor{keywordtype}{bool} \mbox{\hyperlink{classrgbd__slam_1_1map__management_1_1_map___point_ad492ba9b9000d85b97cbb18bc2f11c52}{is\_lost}}() \textcolor{keyword}{const}; }
\DoxyCodeLine{136 }
\DoxyCodeLine{140                 \textcolor{keywordtype}{void} \mbox{\hyperlink{classrgbd__slam_1_1map__management_1_1_map___point_ac295737d57b95dfcb00645ff3be3e597}{update\_unmatched}}(\textcolor{keywordtype}{int} removeNMatches = 1) \textcolor{keyword}{override};}
\DoxyCodeLine{141 }
\DoxyCodeLine{145                 \textcolor{keywordtype}{double} \mbox{\hyperlink{classrgbd__slam_1_1map__management_1_1_map___point_ad71e7f37511fa245cbc69254b8c9cde2}{update\_matched}}(\textcolor{keyword}{const} \mbox{\hyperlink{namespacergbd__slam_a1c642e1c4dfceaa8c7409331bfc10b6b}{vector3}}\& newPointCoordinates, \textcolor{keyword}{const} \mbox{\hyperlink{namespacergbd__slam_a2877fc3a278a20d5132bcd38e12faf69}{matrix33}}\& covariance) \textcolor{keyword}{override};}
\DoxyCodeLine{146 }
\DoxyCodeLine{147                 \textcolor{keywordtype}{int} \mbox{\hyperlink{classrgbd__slam_1_1map__management_1_1_map___point_a78264c7d69160b1838f7e454ccdd6a2f}{get\_age}}()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{148                     \textcolor{keywordflow}{return} \_age;}
\DoxyCodeLine{149                 \}}
\DoxyCodeLine{150 }
\DoxyCodeLine{151             \textcolor{keyword}{protected}:}
\DoxyCodeLine{155                 \textcolor{keywordtype}{double} \mbox{\hyperlink{classrgbd__slam_1_1map__management_1_1_map___point_a721c25c90375f259fa7a53080014e948}{get\_confidence}}() \textcolor{keyword}{const override}; }
\DoxyCodeLine{156 }
\DoxyCodeLine{157             \textcolor{keyword}{private}:}
\DoxyCodeLine{158                 \textcolor{comment}{// The number of times this point failed tracking.}}
\DoxyCodeLine{159                 \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} \_failTrackingCount;}
\DoxyCodeLine{160 }
\DoxyCodeLine{161                 \textcolor{comment}{// Successful matches count}}
\DoxyCodeLine{162                 \textcolor{keywordtype}{int} \_age;   }
\DoxyCodeLine{163         \};}
\DoxyCodeLine{164 }
\DoxyCodeLine{165     \} \textcolor{comment}{/* map\_management */}}
\DoxyCodeLine{166 }
\DoxyCodeLine{167     \textcolor{keyword}{typedef} std::list<map\_management::Point> \mbox{\hyperlink{namespacergbd__slam_a72a7655490cf888467a9fcfb29bc4145}{point\_container}};}
\DoxyCodeLine{168     \textcolor{keyword}{typedef} std::pair<map\_management::Point, map\_management::Point> \mbox{\hyperlink{namespacergbd__slam_a90bbc9699481bccb75546e08a112d64d}{map\_point\_pair}};}
\DoxyCodeLine{169     \textcolor{keyword}{typedef} std::list<map\_point\_pair> \mbox{\hyperlink{namespacergbd__slam_acb92efd792d97b44c1f403017ac54de9}{matched\_point\_container}};}
\DoxyCodeLine{170     \textcolor{keyword}{typedef} std::unordered\_map<unsigned int, map\_management::Point> \mbox{\hyperlink{namespacergbd__slam_a120a836e72fb1dfc7d430f0fec397419}{point\_map}};}
\DoxyCodeLine{171 }
\DoxyCodeLine{172 \} \textcolor{comment}{/* rgbd\_slam */}}
\DoxyCodeLine{173 }
\DoxyCodeLine{174 \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
